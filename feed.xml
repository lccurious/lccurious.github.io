<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="https://lccurious.github.io/feed.xml" rel="self" type="application/atom+xml"/><link href="https://lccurious.github.io/" rel="alternate" type="text/html" hreflang="en"/><updated>2024-03-20T11:56:11+00:00</updated><id>https://lccurious.github.io/feed.xml</id><title type="html">Curiousity Hub</title><subtitle>A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. </subtitle><entry><title type="html">Extend LLMs Context Window</title><link href="https://lccurious.github.io/blog/2024/Extend-LLMs-Context-Window/" rel="alternate" type="text/html" title="Extend LLMs Context Window"/><published>2024-02-25T00:00:00+00:00</published><updated>2024-02-25T00:00:00+00:00</updated><id>https://lccurious.github.io/blog/2024/Extend-LLMs-Context-Window</id><content type="html" xml:base="https://lccurious.github.io/blog/2024/Extend-LLMs-Context-Window/"><![CDATA[<h2 id="introduction">Introduction</h2> <p>Large context window is absolutely desirable feature in Large language models (LLMs). However, previous concepts located in enhance the ability during pretraining period, this requires costly data collection and quadratic memory resources. Thereby, in past year, large context window technology became a battlefield attracted a log of fire. There are two desired property: input context length and model output length. Generally, people focus more on the input context length because rare people except the one want LLMs to write long story want to read long context output.</p> <p>The large context conditions are extremely important during RAG, due to we want LLMs to read comprehensive materials and output a perfect summary or utilize the key idea of Retrieved references. Even, some models said they read a whole book, but with the development, we still want the model on then hand can read a list of books, or a large table etc. So, LLMs can finally became an irreplaceable workflow.</p> <p>But with limited resources on the hand, most user are not able to retrain the models or fine-tune the model on the hand. Therefore, there are urgent demands of creating resources efficient adaptation and inference methods. No retraining or SFT requirements.</p> <h2 id="methodology">Methodology</h2> <p>Currently, there is no fine-tuning free methods available. As LongRoPE <a href="http://arxiv.org/abs/2402.13753">📑Ding et al., 2024</a> extend the context length by rescaling the RoPE positional encoding <a href="http://arxiv.org/abs/2104.09864">📑Su et al., 2023</a> frequencies to gradually extend the context window. For a LLM targeting a context window size of \(L’\) and lengthy input document \(\boldsymbol{X}\),</p> \[\mathop{\arg\min}_{\boldsymbol{x}\in \boldsymbol{X};|\boldsymbol{x}|\geq L'}\mathcal{L}(LLM(RoPE,\boldsymbol{X}))\] <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2024-02-25-Extend-LLMs-Context-Window/9448554a_Untitled-480.webp 480w,/assets/img/2024-02-25-Extend-LLMs-Context-Window/9448554a_Untitled-800.webp 800w,/assets/img/2024-02-25-Extend-LLMs-Context-Window/9448554a_Untitled-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2024-02-25-Extend-LLMs-Context-Window/9448554a_Untitled.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <h3 id="uniformly-distribute-the-4096-into-2048-position-grids">Uniformly distribute the 4096 into 2048 position grids</h3> <p>As what they discussed in the <a href="http://arxiv.org/abs/2306.15595">📑Chen et al., 2023</a>, they mentioned</p> <h2 id="evaluation">Evaluation</h2> <h3 id="needle-in-a-haystack-test">Needle-in-a-Haystack test</h3> <h3 id="passkey-retrieval">Passkey retrieval</h3> <h2 id="conclusion">Conclusion</h2>]]></content><author><name></name></author><category term="Machine Learning"/><category term="LLMs"/><summary type="html"><![CDATA[Introduction]]></summary></entry><entry><title type="html">Introduction to LLMs</title><link href="https://lccurious.github.io/blog/2023/Introduction-to-LLMs/" rel="alternate" type="text/html" title="Introduction to LLMs"/><published>2023-12-14T01:01:21+00:00</published><updated>2023-12-14T01:01:21+00:00</updated><id>https://lccurious.github.io/blog/2023/Introduction-to-LLMs</id><content type="html" xml:base="https://lccurious.github.io/blog/2023/Introduction-to-LLMs/"><![CDATA[<p>准确地说这里是指 GPT，OpenAI 团队也发布了一篇简短的文章用于解释这个生成式预训练 Transformer<sup id="fnref:gpt" role="doc-noteref"><a href="#fn:gpt" class="footnote" rel="footnote">1</a></sup>。</p> <div class="row"> <div class="col-lg-10 mt-3 mt-md-0 mx-auto"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023-12-14-Introduction-to-LLMs/GPTs-tree-480.webp 480w,/assets/img/2023-12-14-Introduction-to-LLMs/GPTs-tree-800.webp 800w,/assets/img/2023-12-14-Introduction-to-LLMs/GPTs-tree-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023-12-14-Introduction-to-LLMs/GPTs-tree.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="GPTs Tree" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">GPTs Tree</figcaption> </figure> </div> </div> <h2 id="brief-introduction-to-gpt">Brief Introduction to GPT</h2> <p>主要的设计和创作者是OpenAI，但是更进一步的实现和研究其实来自于非常多的其他团队，包括硬件部分，分布式训练，RLHF等。在 2023 年 3 月份发布的 GPT-4 技术报告 <a href="http://arxiv.org/abs/2303.08774">OpenAI, 2023</a> 也已经比较详尽地介绍了关于模型的能力范围细节。</p> <h3 id="模型架构">模型架构</h3> <p>在 Attention is All You Need <a href="https://proceedings.neurips.cc/paper/2017/hash/3f5ee243547dee91fbd053c1c4a845aa-Abstract.html">Vaswani et al., 2017</a> 原文中提出的 Transformer 架构包含编码器和解码器用于序列任务的编码。在后来的 Generative Pre-trained Transformer 的开发中，OpenAI 选择了 Decoder-Only 的思路，Google 先选择了 Encoder-Decoder 的架构。OpenAI 的研究人员表示在 Decoder-Only 的架构设计下，模型更难通过模仿数据中的表面规律来产生似是而非的回答。这提高了模型最后的学习难度，只有模型学到更加本质的规律以后才能使得其输出看起来像那么回事。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023-12-14-Introduction-to-LLMs/Transformers-decoder-only-480.webp 480w,/assets/img/2023-12-14-Introduction-to-LLMs/Transformers-decoder-only-800.webp 800w,/assets/img/2023-12-14-Introduction-to-LLMs/Transformers-decoder-only-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023-12-14-Introduction-to-LLMs/Transformers-decoder-only.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Comparsion of Transformers and Decoder-only" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Comparsion of Transformers and Decoder-only</figcaption> </figure> </div> </div> <p>所以后来除了 OpenAI 团队以外，很多其他团队也发现了随着模型规模的增加，Decoder-Only 的架构确实能够非常好地完成任务<sup id="fnref:zhihu" role="doc-noteref"><a href="#fn:zhihu" class="footnote" rel="footnote">2</a></sup>，也有着更高的上限和多样性。 目前的主流 GPT 系列是以 Transformer <a href="https://proceedings.neurips.cc/paper/2017/hash/3f5ee243547dee91fbd053c1c4a845aa-Abstract.html">Vaswani et al., 2017</a> 作为基本模块进行组合实现的。尽管它们都遵从类似的架构形式，但是也还是有可能使用其他架构的模块进行组装。例如 RetNet <a href="http://arxiv.org/abs/2307.08621">Sun et al., 2023</a> 提出针对 Transformer 的三种改进，降低模型的计算开销并提升推理阶段的并行性能。RWKV <a href="http://arxiv.org/abs/2305.13048">Peng et al., 2023</a> 也是一种针对 Transformer 的改进。</p> <h3 id="关键模块">关键模块</h3> <div class="row"> <div class="col-lg-8 mt-3 mt-md-0 mx-auto"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023-12-14-Introduction-to-LLMs/GPTs-modules-480.webp 480w,/assets/img/2023-12-14-Introduction-to-LLMs/GPTs-modules-800.webp 800w,/assets/img/2023-12-14-Introduction-to-LLMs/GPTs-modules-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023-12-14-Introduction-to-LLMs/GPTs-modules.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="GPTs modules" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">GPTs modules</figcaption> </figure> </div> </div> <p>从 LLaMA 开始的后续开源 GPT 系列中，都用了一些类似的内部架构设计。用 RoPE 旋转位置编码<a href="http://arxiv.org/abs/2104.09864">Su et al., 2023</a> 来代替基础版本的 Transformer 中的绝对位置编码，好处是可以更加高效地表示不同编码位置之间的相对距离。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023-12-14-Introduction-to-LLMs/RoPE-480.webp 480w,/assets/img/2023-12-14-Introduction-to-LLMs/RoPE-800.webp 800w,/assets/img/2023-12-14-Introduction-to-LLMs/RoPE-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023-12-14-Introduction-to-LLMs/RoPE.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="RoPE" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">RoPE</figcaption> </figure> </div> </div> <p>\begin{equation} f_{q,k}(\boldsymbol{x}_{m},m)=\boldsymbol{R}^{d}_{\Theta,m}\boldsymbol{W}_{{q,k}}\boldsymbol{x}_{m} \end{equation}</p> <p>其中 \(\boldsymbol{R}\) 的具体形式为：</p> <p>\begin{equation} \boldsymbol{R}^d_{\Theta,m} = \begin{pmatrix} \cos{m\theta_1}&amp; -\sin{m\theta_1}&amp;0&amp;0&amp;\cdots&amp;0&amp;0\\ \sin{m\theta_1}&amp;\cos{m\theta_1}&amp;0&amp;0&amp;\cdots&amp;0&amp;0 \\ 0&amp;0&amp;\cos{m\theta_2}&amp; -\sin{m\theta_2}&amp;\cdots&amp;0&amp;0\\ 0&amp;0&amp;\sin{m\theta_2}&amp;\cos{m\theta_2}&amp;\cdots&amp;0&amp;0 \\ \vdots&amp;\vdots&amp;\vdots&amp;\vdots&amp;\ddots&amp;\vdots&amp;\vdots\\ 0&amp;0&amp;0&amp;0&amp;\cdots&amp;\cos{m\theta_{d/2}}&amp; -\sin{m\theta_{d/2}}\\ 0&amp;0&amp;0&amp;0&amp;\cdots&amp;\sin{m\theta_{d/2}}&amp;\cos{m\theta_{d/2}} \end{pmatrix} \end{equation}</p> <p>通过这种形式的位置编码后，计算自注意力机制时就可以推导为如下形式：</p> <p>\begin{equation} \boldsymbol{q}^{\top}_{m}\boldsymbol{k}_{n}=(\boldsymbol{R}^{d}_{\Theta,m}\boldsymbol{W}_{q}\boldsymbol{x}_{m})^{\top}(\boldsymbol{R}^{d}_{\Theta,n}\boldsymbol{W}_{k}\boldsymbol{x}_{n})=\boldsymbol{x}^{\top}\boldsymbol{W}_{q}\boldsymbol{R}^{d}_{\Theta,n-m}\boldsymbol{W}_{k}\boldsymbol{x}_{n} \end{equation}</p> <p>在 LLaMA2 中的一个关键性改进则在于引入了 Grouped-query 技术 <a href="http://arxiv.org/abs/2305.13245">Ainslie et al., 2023</a> ：</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023-12-14-Introduction-to-LLMs/group_query-480.webp 480w,/assets/img/2023-12-14-Introduction-to-LLMs/group_query-800.webp 800w,/assets/img/2023-12-14-Introduction-to-LLMs/group_query-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023-12-14-Introduction-to-LLMs/group_query.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Group query" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Group query</figcaption> </figure> </div> </div> <h3 id="mistral-7b-架构">Mistral-7B 架构</h3> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023-12-14-Introduction-to-LLMs/Mistral-7B-480.webp 480w,/assets/img/2023-12-14-Introduction-to-LLMs/Mistral-7B-800.webp 800w,/assets/img/2023-12-14-Introduction-to-LLMs/Mistral-7B-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023-12-14-Introduction-to-LLMs/Mistral-7B.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Mistral 7B" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Mistral 7B</figcaption> </figure> </div> </div> <p>在 Transformers 模型的序列建模中需要引入一个因果掩码机制，在建模后继序列内容的时候保证仅引入之前的序列信息而不带来信息的泄露。掩码矩阵通常为一个上三角矩阵，Mistral-7B 模型在设计过程中改了这一步，一个后继 token 的建模只能看到离当前位置较近的一些前序 tokens，这样就可以在很大程度上减少整体模型的总体计算量。尽管在当前层每个 token 只能看到部分前继的信息，但是网络的层数越靠后，前面的信息就像生物富集似的全部汇聚在最后，所以整体效果上每个 token 的建模过程中还是用了它的全部前序信息。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023-12-14-Introduction-to-LLMs/mistral-7b-performance-480.webp 480w,/assets/img/2023-12-14-Introduction-to-LLMs/mistral-7b-performance-800.webp 800w,/assets/img/2023-12-14-Introduction-to-LLMs/mistral-7b-performance-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023-12-14-Introduction-to-LLMs/mistral-7b-performance.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Mistral-7B performance" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Mistral-7B performance</figcaption> </figure> </div> </div> <p>当然，Mistral-7B 的性能测试表示也非常亮眼。</p> <h2 id="总体训练流程">总体训练流程</h2> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023-12-14-Introduction-to-LLMs/LLMs_training-480.webp 480w,/assets/img/2023-12-14-Introduction-to-LLMs/LLMs_training-800.webp 800w,/assets/img/2023-12-14-Introduction-to-LLMs/LLMs_training-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023-12-14-Introduction-to-LLMs/LLMs_training.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="LLMs training" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">LLMs training</figcaption> </figure> </div> </div> <p>根据 LLaMA 和 OpenAI 的公开内容，模型总体训练分为三个阶段：</p> <ol> <li>通过 Next Token Prediction 实现模型在海量互联网数据上的预训练</li> <li>将预训练完成的模型采用有监督微调策略来实现特定任务上的改进</li> <li>引入基于人类反馈的强化学习策略使模型进一步理解各类人类任务</li> </ol> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023-12-14-Introduction-to-LLMs/RLHF-480.webp 480w,/assets/img/2023-12-14-Introduction-to-LLMs/RLHF-800.webp 800w,/assets/img/2023-12-14-Introduction-to-LLMs/RLHF-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023-12-14-Introduction-to-LLMs/RLHF.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="RLHF" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">RLHF</figcaption> </figure> </div> </div> <h2 id="compression--intelligence">Compression &amp; Intelligence</h2> <p>DeepMind 的研究表示模型即使没有针对压缩任务进行特别设计和优化，也能够作为一种通用压缩器。<a href="http://arxiv.org/abs/2309.10668">Delétang et al., 2023</a> 中表示经过预训练后的模型能够在图像、语音、文本这些类型的数据压缩能力上都不亚于专业的 gzip 等压缩软件。</p> <blockquote> <p>We empirically demonstrate that these models, while (meta-)trained primarily on text, also achieve state-of-the-art compression rates across different data modalities, using their context to condition a general-purpose compressor to excel at a particular task.</p> </blockquote> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023-12-14-Introduction-to-LLMs/arithmetic_compression-480.webp 480w,/assets/img/2023-12-14-Introduction-to-LLMs/arithmetic_compression-800.webp 800w,/assets/img/2023-12-14-Introduction-to-LLMs/arithmetic_compression-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023-12-14-Introduction-to-LLMs/arithmetic_compression.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="arithmetic compression" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">arithmetic compression</figcaption> </figure> </div> </div> <p>以一串字符序列为例，字符串中的每个字母都能对应于一个边缘概率，表示它在环境中出现的概率。</p> <ol> <li>第一个字符为 A，编码应该落到 \([0, 0.45]\) 这个区间内</li> <li>下一个字符为 I，细化一下区间，编码应该落在 \([0.09, 0.36]\) 这个区间内</li> <li>下一个字符为 X，细化一下区间，编码应该落在 \([0.266, 0.36]\) 这个区间内</li> <li>最后一个字符为 I，细化一下区间，编码应该落在 \([0.322, 0.341]\) 这个区间内</li> <li>在 \([0.322, 0.341]\) 这个区间内任意取一个小数即可，因为这个编码肯定是小数，所以只要用01编码小数点后的数字即可，图中示意的编码即为 <code class="language-plaintext highlighter-rouge">b0101010</code></li> </ol> <div class="row"> <div class="col-sm-4 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023-12-14-Introduction-to-LLMs/arithmetic_algorithm-480.webp 480w,/assets/img/2023-12-14-Introduction-to-LLMs/arithmetic_algorithm-800.webp 800w,/assets/img/2023-12-14-Introduction-to-LLMs/arithmetic_algorithm-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023-12-14-Introduction-to-LLMs/arithmetic_algorithm.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Wiki arithmetic algorithm" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Wiki arithmetic algorithm</figcaption> </figure> </div> <div class="col-sm-8 mt-3 mt-md-0"> <p>算数编码的原理与哈夫曼编码类似，一个长串最终会被映射到某个01字符串上，算数编码的理论极限更加接近于香农熵的极限：</p> <p>\begin{equation} H=-\sum^{N}_{i=1}P(i)\log_{b}P(i) \end{equation}</p> <p>如果 $$b=2$$，熵的单位为bit，如果 $$b=e$$，熵的单位为 奈特。</p> </div> </div> <p>在算数编码的流程开始时，需要所有基本字符对应的边缘概率，这个边缘概率反应了每个字符在这个场景中的统计概率。对于纯粹的文件压缩任务而言，这可以通过先读一遍文件所有的信息来获取。但是对于通用压缩的模型而言，它得掌握全宇宙中每个字符对应的基本出现概率。这显然无法做到，所以只能通过近似的方式来做。这个提升这个近似的过程其实就与我们的模型训练过程对应：</p> <p>\begin{equation} H(\rho, \hat{\rho}):=\mathbb{E}_{x\sim \rho}\left[\sum^{n}_{i=1}-\log_{2}\hat{\rho}(x_{i}|x_{&lt;i})\right]. \end{equation}</p> <p>这个极大似然的目标也就对应于最小化序列 \(x_{1:n}\) 压缩编码后的编码长度 \(-\sum^{n}_{i=1}\log_{2}\hat{\rho}(x_{i}\vert x_{&lt;i})\)，因为完美的编码结果就是最小的，所以训练过程就是最小化参数降低模型的编码长度。这个损失项也就完整对应于当前各类大模型的预训练目标函数。</p> <p>相应的，如果把这个编码形式改一改，刚好对应于：</p> <p>\begin{equation} \rho(x_{i}|x_{&lt;i})=2^{\ell_{c}(x_{&lt;i})-\ell_{c}([x_{&lt;i},x_{i}])} \end{equation}</p> <p>这就是 Next-Token prediction 的推理形式。</p> <h2 id="实验设计">实验设计</h2> <p>大语言模型的输入上下文有窗口极限限制，一般的数据不能被一口气全部塞进模型，为了解决此类问题就引出两类策略：</p> <ol> <li>使用滑动编码策略，每个压缩器都在数据上滑动，每编码一个新的 byte 都会用到前 \(C-1\) 个 bytes</li> <li>直接将输入分解为多个长度相同的块，然后一一将这些块输入到编码器中进行编码</li> </ol> <p>在实际的实验中，本文的实验采用了平均分快的方法，所有的输入数据集被分割为多个 2048 bytes 的 chunk，然后这些输入块将被一个一个输入压缩器。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023-12-14-Introduction-to-LLMs/compression_results-480.webp 480w,/assets/img/2023-12-14-Introduction-to-LLMs/compression_results-800.webp 800w,/assets/img/2023-12-14-Introduction-to-LLMs/compression_results-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023-12-14-Introduction-to-LLMs/compression_results.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Compression results" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Compression results</figcaption> </figure> </div> </div> <p>从实验结果可以看到各类大模型具备了比肩专业的压缩编码软件的能力。</p> <ul> <li> <p>更多参考解释：</p> <blockquote> <p><a href="https://zhuanlan.zhihu.com/p/657899967">Language Modeling Is Compression?Google DeepMind 文章与Open AI的两次压缩与智能/泛化talk的笔记和想法 - beiluo的文章 - 知乎</a></p> <p><a href="https://zhuanlan.zhihu.com/p/619511222">压缩下一个 token 通向超过人类的智能 - 周昕宇的文章 - 知乎</a></p> </blockquote> </li> </ul> <p>所以本质上，任何其他可以建模为极大似然估计的任务，都可以直接作为大模型的 next-token-prediction 任务。</p> <p>是的，您的理解是正确的。在使用大型语言模型（如参数为 \(\theta\) 的模型）进行编码和解码的过程中，模型的作用是估计给定前文的条件下，每个字符的概率分布。这一过程可以分为以下几个步骤：</p> <h3 id="编码过程">编码过程</h3> <ol> <li><strong>概率分布估计</strong>：对于序列中的每个字符 \(s_n\)，使用模型 \(p_{\theta}\) 来计算在给定前面字符 \(s_{&lt;n}\) 的条件下，每个可能字符的概率 \(p_{\theta}(s_n\vert s_{&lt;n})\)。</li> <li><strong>转换为二进制编码</strong>：基于这些概率估计，使用类似于算术编码的方法将整个序列转换为一个二进制编码。这个过程涉及根据每个字符的概率逐步细化一个表示整个序列的数值区间。</li> </ol> <h3 id="解码过程">解码过程</h3> <ol> <li><strong>读取编码数据</strong>：解码过程从读取代表原始序列的二进制编码开始。</li> <li><strong>迭代概率计算</strong>：使用模型 \(p_{\theta}\) 逐步重建序列。对于每个位置 \(n\)，模型计算 \(p_{\theta}(s_0)\)， \(p_{\theta}(s_1\vert s_0)\)，…， \(p_{\theta}(s_n\vert s_{&lt;n})\)。</li> <li><strong>区间判断</strong>：根据编码数据和这些概率估计，确定每个字符落在哪个概率区间内。这允许模型逐步确定并恢复原始序列中的每个字符。</li> </ol> <p>这个过程依赖于模型对字符序列概率分布的准确估计。理论上，如果模型的估计非常准确，这种方法可以非常有效地压缩和恢复数据。然而，实际应用中的效率和准确性可能会受到多种因素的影响，包括模型的复杂性、训练数据的质量和范围，以及实际实现时的各种优化和权衡。</p> <h2 id="chinchilla-rule">Chinchilla Rule</h2> <p>\begin{equation} \mathrm{FLOPs}(N,D)=C:N_{opt}(C),D_{opt}(C)=\mathop{\rm argmin}_{N,D~s.t.~\mathrm{FLOPs}(N,D)=C}L(N,D). \end{equation}</p> <p>根据 Chinachilla Rule 可以估算出在给定计算量规模的前提下，如何设置参数量和训练数据集规模来实现最大化的模型优化水准。 所以经过一系列的工程实验之后，研究者们拟合出一个经验曲线：</p> <p>\begin{equation} \hat{L}(N,D)=E+\frac{A}{N^{\alpha}}+\frac{B}{D^{\beta}} \end{equation}</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023-12-14-Introduction-to-LLMs/Chinachilla_curve-480.webp 480w,/assets/img/2023-12-14-Introduction-to-LLMs/Chinachilla_curve-800.webp 800w,/assets/img/2023-12-14-Introduction-to-LLMs/Chinachilla_curve-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023-12-14-Introduction-to-LLMs/Chinachilla_curve.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Chinachilla curves" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Chinachilla curves</figcaption> </figure> </div> </div> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023-12-14-Introduction-to-LLMs/Chinachilla_fitness-480.webp 480w,/assets/img/2023-12-14-Introduction-to-LLMs/Chinachilla_fitness-800.webp 800w,/assets/img/2023-12-14-Introduction-to-LLMs/Chinachilla_fitness-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023-12-14-Introduction-to-LLMs/Chinachilla_fitness.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Chinachilla fitness" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Chinachilla fitness</figcaption> </figure> </div> </div> <p>但是后面又有一些讨论表示，Chinachilla Rule 是因为实验还是没有做到训练时间足够长。以及后面出现的 Mistral-7B 模型似乎也反驳了这类问题。</p> <h2 id="模型评估">模型评估</h2> <p>当评估一个经过训练和调整的模型时，可以从多个方面进行考量，包括知识与能力、伦理与安全以及垂直领域评估。以下是一些常见的评估指标及其简要说明：</p> <ul> <li><strong>Perplexity (困惑度)</strong>：这是一个衡量语言模型性能的标准指标，用于评估模型对测试数据的预测能力。困惑度越低，表明模型对语言的预测越准确。</li> <li><strong>BLEU (双语互译质量评估)</strong>：主要用于机器翻译，通过比较机器翻译输出与一系列参考翻译之间的重叠度来评估翻译质量。</li> <li><strong>ROUGE (答案生成评估指标)</strong>：常用于评估自动摘要或机器翻译的质量，主要通过比较生成的摘要或翻译与参考摘要或翻译之间的重叠来进行评估。</li> <li><strong>METEOR (翻译结果评估)</strong>：这是另一种用于评估机器翻译质量的指标，它不仅考虑词汇的精确匹配，还考虑了同义词和词形变化，通常认为比BLEU更精细。</li> <li><strong>Human Evaluation (人工评估)</strong>：这涉及到人类评审员对模型的输出进行评估，通常考虑准确性、可读性和相关性等多个维度。人工评估可以提供更直观、更全面的评价。</li> <li><strong>Zero-shot Evaluation (零样本评估)</strong>：这是一种测试模型在没有接受特定任务训练的情况下对新任务的处理能力的方法。零样本评估检验模型的泛化能力和对新领域、新类型数据的适应性。</li> </ul> <p>此外还有一些比较典型的评估指标。</p> <hr/> <div class="footnotes" role="doc-endnotes"> <ol> <li id="fn:gpt" role="doc-endnote"> <p><a href="https://openai.com/research/language-unsupervised">Improving language understanding with unsupervised learning</a> <a href="#fnref:gpt" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> <li id="fn:zhihu" role="doc-endnote"> <p><a href="https://www.zhihu.com/question/588325646">为什么现在的LLM都是Decoder only的架构？ - 知乎</a> <a href="#fnref:zhihu" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> </ol> </div>]]></content><author><name></name></author><category term="Machine Learning"/><category term="convex optimization"/><category term="pattern recognition"/><summary type="html"><![CDATA[准确地说这里是指 GPT，OpenAI 团队也发布了一篇简短的文章用于解释这个生成式预训练 Transformer1。 Improving language understanding with unsupervised learning &#8617;]]></summary></entry><entry><title type="html">MST-Analysis</title><link href="https://lccurious.github.io/blog/2023/MST-Analysis/" rel="alternate" type="text/html" title="MST-Analysis"/><published>2023-02-24T19:21:44+00:00</published><updated>2023-02-24T19:21:44+00:00</updated><id>https://lccurious.github.io/blog/2023/MST-Analysis</id><content type="html" xml:base="https://lccurious.github.io/blog/2023/MST-Analysis/"><![CDATA[<p>蛋白质或者小分子在生物液体（例如血清或细胞裂解物）中会发生相互作用，可以把这种作用想象成你穿着毛衣经过长满苍耳的灌木丛时，那些满是钩子的种子粘的你满身都是，但是如果你穿的是冲锋衣，那么可能就一颗也粘不上。这些分子化合物之间也是如此，它们之间有选择性地相互结合。了解这些结合的亲和度是研发新药的关键参考。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023-02-24-MST-Analysis/bg-480.webp 480w,/assets/img/2023-02-24-MST-Analysis/bg-800.webp 800w,/assets/img/2023-02-24-MST-Analysis/bg-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023-02-24-MST-Analysis/bg.jpeg" class="img-fluid rounded z-depth-0" width="100%" height="auto" title="图片来源：战斗细胞" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">图片来源：战斗细胞</figcaption> </figure> </div> </div> <p>把一堆宏观上看不到的蛋白质放入纤细透光的毛细管中，再加热到适合的温度（差不多是人的体温，因为这些小东西对于温度很挑剔），就可能看到在这种自由、接近人体内环境的场景中，分子会相互结合。如果它们相互结合了，那么对光的折射反射率就不同了，所以在宏观上用荧光强度就可以从侧面反映它们结合的强度 <sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup>。另外，两种分子之间的结合比例到底是多少也是一个关键问题，所以需要配比不同的浓度梯度的样品都测测看。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023-02-24-MST-Analysis/mst-motivation-480.webp 480w,/assets/img/2023-02-24-MST-Analysis/mst-motivation-800.webp 800w,/assets/img/2023-02-24-MST-Analysis/mst-motivation-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023-02-24-MST-Analysis/mst-motivation.png" class="img-fluid rounded z-depth-0" width="100%" height="auto" title="MST 原理" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">MST 原理</figcaption> </figure> </div> </div> <p>a. 观测这个微观过程的设备结构，b. 刚开始因为温度不合适，分子之间不结合，加热之后它们就快速行动起来，并呈现出宏观的变化，c. 从侧面的荧光强度曲线可以观测到它们的结合强度</p> <h2 id="理论背景">理论背景</h2> <p>当溶液加热时，分子就会沿着温度梯度移动（详见热致扩散），移动方向和质量扩散方向相反。这两种相反的浓度变化趋势会形成一种平衡：</p> <p>\begin{equation} \frac{c}{c_{0}}=\exp[-S_{T} \cdot(T-T_{0})] \end{equation}</p> <p>这里的相对浓度取决于Soret系数\(S_{T}\)和温度梯度\(\Delta T=T-T_{0}\)，其中，Soret系数的确定还需要考虑很多物理现象，包括表面参数（电荷、疏水性）、缓冲液中离子移动产生的电场等。不过，这里直接给他套个简单模型差也差不多了：</p> <p>\begin{equation} S_{T}=\frac{A}{kT}\left( -\Delta s_{\rm hyd}(T)+\frac{\beta \sigma^{2}_{\rm eff}}{4\varepsilon \varepsilon_{0}T} \cdot \lambda_{\rm DH} \right) \end{equation}</p> <p>\(A\)是分子的表面积，\(\sigma_{\rm eff}\)表示有效电荷，\(\Delta s_{\rm hyd}\)表示<em>分子-溶液</em>界面的水合熵，\(\lambda_{\rm DH}\)表示德拜-休克尔筛分长度，\(\varepsilon\)表示介电常数，\(\beta\)表示其温度导数。</p> <p>当蛋白质和分子相互作用时，表面积\(A\)会改变，\(\Delta s_{\rm hyd}\)水合熵会变，有效电荷\(\sigma_{\rm eff}\)也会变。即一点点微小的构型改变，我们都可以通过宏观的统计数据（例如浓度）捕捉到。</p> <p>所以，基于物质作用定律可以推导出如下的经验公式：</p> <p>\begin{equation} \frac{BL}{B_{0}}=\frac{(L_{0}+B_{0}+K_{d})-\sqrt{(L_{0}+B_{0}+K_{d})^{2}-4L_{0}B_{0}}}{2B_{0}} \end{equation}</p> <p>这里 \(B\) 是指结合位点，\(L\)是指配体，\(BL\)是它们形成的复合物的浓度。\(L_{0}\)表示每个数据点添加配体的量，\(B_{0}\)是指结合状态对应的总浓度。\(K_{d}\)是解离常数，它量化了配体与特定受体之间的亲和程度。</p> <p>基于一种线性变化的思路，你的配体浓度低了，那么溶液中只有部分受体处于结合状态，你只有滴滴滴滴到差不多过量了以后，才能保证所有的受体都和配体结合了。那么那个就是饱和浓度，但是我们刚开始怎么会知道那东西是多少，所以你就得用各种浓度梯度去试出来。这样，我们就可以写出一条随浓度连续变换的插值关系来：</p> <p>\begin{equation} \Delta c_{\rm measured}=f\cdot \Delta c_{\rm bound}+(1-f)\cdot \Delta c_{\rm unbound} \end{equation}</p> <h2 id="数据分析">数据分析</h2> <p>前面已经说了，浓度是怎么变，荧光强度就怎么变，所以用荧光强度值\(F\)代入就有：</p> <p>\begin{equation} F=(1-f(c))F_{\rm unbound} + f(c)F_{\rm bound} \end{equation}</p> <p><strong>注意：</strong>这里的 \(F_{\rm unbound}\)和\(F_{\rm bound}\)是不知道的，只能按照下面这个公式去代入数值去估计：</p> <p>\begin{equation} f(c)=\frac{c+c_T+K_d-\sqrt{\left(c+c_{T} + K_d\right)^2+4 c c_T}}{2 c_T} \end{equation}</p> <p>以上带入的参数都应该首先进行归一化，\(\Delta c_{\rm measured}\)就对应于\(\frac{BL}{B_{0}}\)，也对应于归一化的荧光强度 \(F_{\rm norm}\)。其中，荧光的强度的归一化一般遵照一条约定俗成的规则如下图所示：</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023-02-24-MST-Analysis/fluorescence-region-480.webp 480w,/assets/img/2023-02-24-MST-Analysis/fluorescence-region-800.webp 800w,/assets/img/2023-02-24-MST-Analysis/fluorescence-region-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023-02-24-MST-Analysis/fluorescence-region.png" class="img-fluid rounded z-depth-0" width="100%" height="auto" title="fluorescence-region" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">fluorescence-region</figcaption> </figure> </div> </div> <p>蓝色区域一般作为归一化常数\(F_{0}\)，对应于加热前荧光强度，红色区域作为被归一化荧光强度\(F_{1}\)。之所以这么选择是因为：在红外激光加热几秒钟后，即使扩散缓慢且在测量时间内没有达到稳态，浓度曲线通常在几秒钟后即可区分。要的就是这种区分度，所以在一般情况下取其第4秒到第5秒这一秒内的荧光强度样本点就可以了，这只是一种习惯。每个箱线图都对应于一组一秒内的荧光强度，绝对数值不那么重要，数值随配体的浓度变化规律才重要。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023-02-24-MST-Analysis/fluorescence-curve-480.webp 480w,/assets/img/2023-02-24-MST-Analysis/fluorescence-curve-800.webp 800w,/assets/img/2023-02-24-MST-Analysis/fluorescence-curve-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023-02-24-MST-Analysis/fluorescence-curve.png" class="img-fluid rounded z-depth-0" width="100%" height="auto" title="fluorescence-curve" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">fluorescence-curve</figcaption> </figure> </div> </div> <h3 id="python-拟合">Python 拟合</h3> <p>首先导入必要的库，一般仪器导出的 <code class="language-plaintext highlighter-rouge">.moc</code> 文件就是个 <code class="language-plaintext highlighter-rouge">SQLite</code> 文件，已经有雷锋写好了解码函数<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup>可以用于解码，导入这个 <code class="language-plaintext highlighter-rouge">MSTProcess</code> 即可：</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="n">MSTProcess</span> <span class="k">as</span> <span class="n">MST</span>
<span class="kn">from</span> <span class="n">scipy.optimize</span> <span class="kn">import</span> <span class="n">curve_fit</span><span class="p">,</span> <span class="n">minimize</span>

<span class="c1"># 导入MST实验数据 
</span><span class="n">MOCfile</span> <span class="o">=</span> <span class="n">MST</span><span class="p">.</span><span class="nf">openMOCFile</span><span class="p">(</span><span class="sh">'</span><span class="s">../data/xxxx.moc</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div> <p>然后定义结合比例公式：</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">K_d_model</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">K_d</span><span class="p">,</span> <span class="n">F_unbound</span><span class="p">,</span> <span class="n">F_bound</span><span class="p">,</span> <span class="n">c_T</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">K_d</span><span class="p">):</span>
        <span class="c1"># Protein-binding assays in biological liquids using microscale thermophoresis
</span>        <span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="n">c</span> <span class="o">+</span> <span class="n">c_T</span> <span class="o">+</span> <span class="n">K_d</span> <span class="o">-</span> <span class="n">np</span><span class="p">.</span><span class="nf">sqrt</span><span class="p">((</span><span class="n">c</span> <span class="o">+</span> <span class="n">c_T</span> <span class="o">+</span> <span class="n">K_d</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">c</span> <span class="o">*</span> <span class="n">c_T</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">c_T</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">val</span>
    <span class="nf">return </span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nf">func</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">K_d</span><span class="p">))</span> <span class="o">*</span> <span class="n">F_unbound</span> <span class="o">+</span> <span class="nf">func</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">K_d</span><span class="p">)</span> <span class="o">*</span> <span class="n">F_bound</span>
</code></pre></div></div> <p>接着定义模型拟合的损失函数：</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">robust_loss</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">c_T</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">y_data</span><span class="p">):</span>
    <span class="n">K_d</span><span class="p">,</span> <span class="n">F_unbound</span><span class="p">,</span> <span class="n">F_bound</span> <span class="o">=</span> <span class="n">params</span>
    <span class="n">predictions</span> <span class="o">=</span> <span class="nc">K_d_model</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">K_d</span><span class="p">,</span> <span class="n">F_unbound</span><span class="p">,</span> <span class="n">F_bound</span><span class="p">,</span> <span class="n">c_T</span><span class="p">)</span>
    <span class="n">residuals</span> <span class="o">=</span> <span class="n">predictions</span> <span class="o">-</span> <span class="n">y_data</span>
    <span class="n">loss</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">sum</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="nf">sqrt</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="p">(</span><span class="n">residuals</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)))</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span>
    <span class="c1"># loss = np.sum(residuals ** 2)
</span>    <span class="k">return</span> <span class="n">loss</span>
</code></pre></div></div> <p>然后进行拟合：</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 浓度序列
</span><span class="n">x_data</span> <span class="o">=</span> <span class="n">concentr_list</span>
<span class="c1"># 归一化后的荧光强度序列
</span><span class="n">y_data</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">asarray</span><span class="p">(</span><span class="n">F1_list</span><span class="p">.</span><span class="nf">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="c1"># 初始的猜测值 [K_d, F_unbound, F_bound] 用于帮助更快求解
</span><span class="n">init_params</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">974</span><span class="p">,</span> <span class="mi">929</span><span class="p">]</span>
<span class="n">res</span> <span class="o">=</span> <span class="nf">minimize</span><span class="p">(</span><span class="n">robust_loss</span><span class="p">,</span> <span class="n">init_params</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">c_T</span><span class="p">,</span> <span class="n">x_data</span><span class="p">,</span> <span class="n">y_data</span><span class="p">))</span>
<span class="c1"># 打印拟合结果
</span><span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">K_d: </span><span class="si">{</span><span class="n">res</span><span class="p">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s">, F_unbound: </span><span class="si">{</span><span class="n">res</span><span class="p">.</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s">, F_bound: </span><span class="si">{</span><span class="n">res</span><span class="p">.</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div> <p>完整实现代码参见：<a href="https://github.com/lion-forest/MST-anaylysis">https://github.com/lion-forest/MST-anaylysis</a></p> <h2 id="名词解释">名词解释<sup id="fnref:3" role="doc-noteref"><a href="#fn:3" class="footnote" rel="footnote">3</a></sup></h2> <ul> <li><strong>热致扩散，Thermaldiffusivity：</strong>质扩散和热传导耦合引起的热质扩散，常称之为索瑞效应和杜伏效应。在热质扩散中，由于温度梯度引起混合物中出现附加的浓度梯度而造成传质，是于1893年由索瑞（C. Soret）在液体中发现的。杜伏效应则是指由于各种物质互相扩散引起温度梯度，或者说，由于有浓度梯度引起温度梯度，这是杜伏（L. Dufour）于1872年在气体中发现的。杜伏效应是索瑞效应的逆效应。</li> <li><strong>受体（Receptor）：</strong>指一类能传导细胞外信号，并在细胞内产生特定效应的分子。包括膜受体和胞内受体。</li> <li><strong>配体（Ligand）：</strong>指一种能与受体结合以产生某种生理效果的物质。细胞外能与受体结合的分子一般称之为配体，包括激素生长因子，细胞因子，神经递质，还有其他各种各样的小分子化合物</li> </ul> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023-02-24-MST-Analysis/receptor1-480.webp 480w,/assets/img/2023-02-24-MST-Analysis/receptor1-800.webp 800w,/assets/img/2023-02-24-MST-Analysis/receptor1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023-02-24-MST-Analysis/receptor1.png" class="img-fluid rounded z-depth-0" width="100%" height="auto" title="rl-1" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">rl-1</figcaption> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023-02-24-MST-Analysis/receptor2-480.webp 480w,/assets/img/2023-02-24-MST-Analysis/receptor2-800.webp 800w,/assets/img/2023-02-24-MST-Analysis/receptor2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023-02-24-MST-Analysis/receptor2.png" class="img-fluid rounded z-depth-0" width="100%" height="auto" title="rl-2" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">rl-2</figcaption> </figure> </div> </div> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023-02-24-MST-Analysis/response-480.webp 480w,/assets/img/2023-02-24-MST-Analysis/response-800.webp 800w,/assets/img/2023-02-24-MST-Analysis/response-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023-02-24-MST-Analysis/response.png" class="img-fluid rounded z-depth-0" width="100%" height="auto" title="response" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">response</figcaption> </figure> </div> </div> <hr/> <div class="footnotes" role="doc-endnotes"> <ol> <li id="fn:1" role="doc-endnote"> <p>Wienken, C., Baaske, P., Rothbauer, U. et al. Protein-binding assays in biological liquids using microscale thermophoresis. Nat Commun 1, 100 (2010). <a href="https://doi.org/10.1038/ncomms1093">https://doi.org/10.1038/ncomms1093</a> <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> <li id="fn:2" role="doc-endnote"> <p><a href="https://github.com/shepherdingelectrons/OpenMST">https://github.com/shepherdingelectrons/OpenMST</a> <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> <li id="fn:3" role="doc-endnote"> <p><a href="https://zh.khanacademy.org/science/biology/cell-signaling/mechanisms-of-cell-signaling/a/introduction-to-cell-signaling">https://zh.khanacademy.org/science/biology/cell-signaling/mechanisms-of-cell-signaling/a/introduction-to-cell-signaling</a> <a href="#fnref:3" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> </ol> </div>]]></content><author><name></name></author><category term="自然科学"/><category term="优化"/><category term="热电泳"/><category term="免疫"/><category term="配体"/><category term="受体"/><category term="荧光"/><summary type="html"><![CDATA[蛋白质或者小分子在生物液体（例如血清或细胞裂解物）中会发生相互作用，可以把这种作用想象成你穿着毛衣经过长满苍耳的灌木丛时，那些满是钩子的种子粘的你满身都是，但是如果你穿的是冲锋衣，那么可能就一颗也粘不上。这些分子化合物之间也是如此，它们之间有选择性地相互结合。了解这些结合的亲和度是研发新药的关键参考。]]></summary></entry><entry><title type="html">搜索技巧</title><link href="https://lccurious.github.io/blog/2022/Search-Skills/" rel="alternate" type="text/html" title="搜索技巧"/><published>2022-01-19T22:09:39+00:00</published><updated>2022-01-19T22:09:39+00:00</updated><id>https://lccurious.github.io/blog/2022/Search-Skills</id><content type="html" xml:base="https://lccurious.github.io/blog/2022/Search-Skills/"><![CDATA[<div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-19-Search-Skills/title-480.webp 480w,/assets/img/2022-01-19-Search-Skills/title-800.webp 800w,/assets/img/2022-01-19-Search-Skills/title-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-19-Search-Skills/title.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="title" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <h1 id="善用关键词规则">善用关键词规则</h1> <h2 id="通用关键词规则">通用关键词规则<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup></h2> <ol> <li>通过双引号要求搜索结果必须包含双引号中的内容，例如：<code class="language-plaintext highlighter-rouge">optimal transport lccurious</code>，要求搜索引擎必须按照双引号中的短语顺序检索结果；</li> <li>使用减号排除包含减号后的搜索结果，例如：<code class="language-plaintext highlighter-rouge">transformer -csdn</code>，就可以排除掉搜索结果中所有与csdn相关的条目了；</li> <li>使用<code class="language-plaintext highlighter-rouge">site</code>关键词让返回的条目只包括在某个指定站点的内容，例如：<code class="language-plaintext highlighter-rouge">latex site:github.io</code>，让返回条目中只包含在“github.io”站点下的内容；</li> <li>使用<code class="language-plaintext highlighter-rouge">link</code>关键词让返回的条目内容中都包含链接了指定的网站，例如：<code class="language-plaintext highlighter-rouge">link:github.com</code>，过滤掉那些不包含“github.com”这个链接的条目，需要注意的是只要网页源代码里有指向该链接的条目都会被视为符合规则（即使页面上肉眼不可见）；</li> <li>通配符检索用<code class="language-plaintext highlighter-rouge">*</code>充当一个占位符，过滤出仅<code class="language-plaintext highlighter-rouge">*</code>位置位置不同的组合内容搜索结果，例如<code class="language-plaintext highlighter-rouge">"The most genius * in the world”</code>，就可以过滤出所有世界上最天才的xxx的搜索结果；</li> <li>近似含义说明符号<code class="language-plaintext highlighter-rouge">~</code> ，例如：<code class="language-plaintext highlighter-rouge">happy ~dog</code>；</li> <li>使用<code class="language-plaintext highlighter-rouge">related</code>关键词搜索所有内容相关或者类似的网站，例如：<code class="language-plaintext highlighter-rouge">related:dribbble.com</code>就可以直接搜索到与这个素材网站相似的其他网站；</li> <li>计算一些简单的数学内容，例如：<code class="language-plaintext highlighter-rouge">exp(10)+sin(10)</code>；</li> <li>快速换算单位，例如：<code class="language-plaintext highlighter-rouge">100日元=?人民币</code>；</li> <li>使用<code class="language-plaintext highlighter-rouge">define</code>关键词搜索定义，例如：<code class="language-plaintext highlighter-rouge">define:normal</code> 、<code class="language-plaintext highlighter-rouge">define:沁园春</code>；</li> <li>使用<code class="language-plaintext highlighter-rouge">AND</code>、<code class="language-plaintext highlighter-rouge">OR</code>等进行组合搜索，Google搜索默认情况下都是使用AND逻辑，即所有关键词都命中的结果才会被返回，但是也可以手动改用OR的逻辑，例如：<code class="language-plaintext highlighter-rouge">transfer learning OR domain adaptation</code>；</li> <li>搜索包括指定数字范围内的内容，例如：<code class="language-plaintext highlighter-rouge">causal discovery 2020..2022</code>就会大概返回2020年到2022年之间的文章；</li> <li>使用<code class="language-plaintext highlighter-rouge">filetype</code>关键词，例如：<code class="language-plaintext highlighter-rouge">cpi ppi 差 filetype:pdf</code>基本上返回的都是与CPI、PPI指数相关的研报PDF文件等；</li> <li>使用<code class="language-plaintext highlighter-rouge">inurl</code>关键字，例如：<code class="language-plaintext highlighter-rouge">inurl:mp4 “瑞克和莫蒂”</code>，在所有返回结果中，网页链接中包含第一个关键字<code class="language-plaintext highlighter-rouge">mp3</code>，第二个关键字<code class="language-plaintext highlighter-rouge">瑞克和莫蒂</code>出现在链接中或网页文档中；</li> <li>使用<code class="language-plaintext highlighter-rouge">allinurl</code>关键字，例如：<code class="language-plaintext highlighter-rouge">allinurl:”cgi-bin” phf +com</code>，让返回的网页链接中包含所有关键字；</li> <li>使用<code class="language-plaintext highlighter-rouge">intitle</code>、<code class="language-plaintext highlighter-rouge">allintitle</code> 关键字对标题栏（即网页标签页名字）进行搜索，例如：<code class="language-plaintext highlighter-rouge">intitle:😧</code> 就可以搜索所有标签页带这个表情的页面了；</li> <li>同理还存在<code class="language-plaintext highlighter-rouge">inanchor</code>、<code class="language-plaintext highlighter-rouge">allinanchor</code> 这类关键字；</li> <li>使用<code class="language-plaintext highlighter-rouge">cache</code> 关键词可以在Google的缓存页面上进行查询；</li> </ol> <h2 id="google学术搜索">Google学术搜索</h2> <ol> <li>使用 <code class="language-plaintext highlighter-rouge">author</code> 关键词限定作者如<code class="language-plaintext highlighter-rouge">author:"Kun Zhang" AND intitle:"Causal"</code> ；</li> <li>使用 <code class="language-plaintext highlighter-rouge">source</code>关键词指定来源，与<code class="language-plaintext highlighter-rouge">site</code>类似，有时<code class="language-plaintext highlighter-rouge">site</code>范围太广，使用<code class="language-plaintext highlighter-rouge">source</code>更精确。 如<code class="language-plaintext highlighter-rouge">"kernel method" source:"Advances in Neural Information Processing"</code>，搜索<code class="language-plaintext highlighter-rouge">nips</code>包含<code class="language-plaintext highlighter-rouge">kernel method</code>全部论文；</li> <li>使用 <code class="language-plaintext highlighter-rouge">intext</code>关键词，例如：<code class="language-plaintext highlighter-rouge">intext:("kernel method" -"semi-supervised learning")</code>，搜索内容中包含<code class="language-plaintext highlighter-rouge">kernel mehtod</code>且不包含<code class="language-plaintext highlighter-rouge">semi-supervised learning</code>的论文；</li> <li>对于某网址对应多个期刊的情况，使用<code class="language-plaintext highlighter-rouge">source</code>而不是<code class="language-plaintext highlighter-rouge">site</code>进行界定。如TPAMI对应网址<code class="language-plaintext highlighter-rouge">ieee.org</code>有很多期刊，而其对应来源为<code class="language-plaintext highlighter-rouge">IEEE Transactions on Pattern Analysis and Machine Intelligence</code>；</li> </ol> <p>下面是一些常用的机器学习相关的源<sup id="fnref:3" role="doc-noteref"><a href="#fn:3" class="footnote" rel="footnote">2</a></sup>:</p> <p>机器学习领域顶会网址(site)</p> <table> <thead> <tr> <th style="text-align: center">刊物缩写</th> <th style="text-align: center">网址site</th> </tr> </thead> <tbody> <tr> <td style="text-align: center">nips</td> <td style="text-align: center">nips.cc</td> </tr> <tr> <td style="text-align: center">icml</td> <td style="text-align: center">icml.cc</td> </tr> <tr> <td style="text-align: center">jmlr</td> <td style="text-align: center">jmlr.org</td> </tr> <tr> <td style="text-align: center">ijcai</td> <td style="text-align: center">ijcai.org</td> </tr> <tr> <td style="text-align: center">aaai</td> <td style="text-align: center">aaai.org</td> </tr> <tr> <td style="text-align: center">uai</td> <td style="text-align: center">uai.org</td> </tr> <tr> <td style="text-align: center">ML汇刊</td> <td style="text-align: center">proceedings.mlr.press</td> </tr> <tr> <td style="text-align: center">Springer下刊物</td> <td style="text-align: center">link.springer.com</td> </tr> <tr> <td style="text-align: center">IEEE下刊物</td> <td style="text-align: center">ieeexplore.ieee.org</td> </tr> </tbody> </table> <p>机器学习领域顶会来源(source)</p> <table> <thead> <tr> <th style="text-align: center">刊物缩写</th> <th style="text-align: center">刊物source</th> </tr> </thead> <tbody> <tr> <td style="text-align: center">AI</td> <td style="text-align: center">Artificial Intelligence</td> </tr> <tr> <td style="text-align: center">TPAMI</td> <td style="text-align: center">IEEE Transactions on Pattern Analysis and Machine Intelligence</td> </tr> <tr> <td style="text-align: center">JMLR</td> <td style="text-align: center">Journal of Machine Learning Research</td> </tr> <tr> <td style="text-align: center">TNNLS</td> <td style="text-align: center">IEEE Transactions on Neural Networks and learning systems</td> </tr> <tr> <td style="text-align: center">Cybernetics</td> <td style="text-align: center">IEEE Transactions on Cybernetics</td> </tr> <tr> <td style="text-align: center">NIPS</td> <td style="text-align: center">Advances in Neural Information Processing Systems</td> </tr> <tr> <td style="text-align: center">ICML</td> <td style="text-align: center">International Conference on Machine Learning</td> </tr> <tr> <td style="text-align: center">IJCAI</td> <td style="text-align: center">International Joint Conference on Artificial Intelligence</td> </tr> <tr> <td style="text-align: center">AAAI</td> <td style="text-align: center">AAAI Conference on Artificial Intelligence</td> </tr> <tr> <td style="text-align: center">COLT</td> <td style="text-align: center">Annual Conference on Computational Learning Theory</td> </tr> <tr> <td style="text-align: center">UAI</td> <td style="text-align: center">Conference on Uncertainty in Artificial Intelligence</td> </tr> </tbody> </table> <h2 id="一些语义上的搜索技巧">一些语义上的搜索技巧</h2> <ol> <li>尽量使用简洁的关键词，因为描述内容越详细满足要求的搜索结果就会越少就越不容易找到对应的内容；</li> <li>逐步增加关键词，根据搜索结果调整增加的关键词；</li> <li>使用一些主动语态的词，例如“如何减轻头痛”改为“缓解 头痛”；</li> <li>同时搜索近义词，比如<code class="language-plaintext highlighter-rouge">高等教育</code>，<code class="language-plaintext highlighter-rouge">学院</code>；</li> </ol> <p>还可以在日常的使用过程中，根据自己的经验积累一些有好资源的网站，之后一些专业性较强的问题的可以优先在那些网站上搜索。</p> <h1 id="其他引擎">其他引擎</h1> <h2 id="常用数据源">常用数据源<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">3</a></sup></h2> <ol> <li>最简单直接的方法就是利用<a href="http://saili.science/information-search/#search-tips">搜索技巧</a>进行<strong>谷歌搜索</strong>（<a href="https://sli1989.github.io/windows-use/#google">谷歌访问配置</a>）。</li> <li>善用垂直类引擎：第一，它的信息源更专业更权威。第二，它可以更快更方便地找到你想要的东西。 <ul> <li><a href="http://data.stats.gov.cn/">国家数据</a></li> <li><a href="http://www.tjcn.org/">中国统计信息网</a></li> </ul> </li> <li>自行使用 “网盘搜索器”，推荐资源： <ul> <li><a href="http://www.panduoduo.top/">盘多多</a>，<a href="http://www.panduoduo.online/">盘多多</a></li> <li><a href="http://www.pansou.com/">盘搜</a></li> <li><a href="https://www.fastsoso.cn/">fastsoso</a></li> <li><a href="http://www.rufengso.net/">如风搜</a></li> </ul> </li> </ol> <h2 id="书籍下载">书籍下载</h2> <ul> <li><a href="http://libgen.rs/">Library Genesis</a></li> <li>英文文献：推荐 <a href="https://search.crossref.org/">CROSSREF 数据库</a>），最后使用 Sci-Hub 数据库下载。 <ul> <li><a href="http://tool.yovisun.com/scihub/">Sci-Hub 可用网址 1</a>，<a href="https://www.keyanguanjia.com/thread-511-1-1.html">可用网址 2</a>。或者使用 Sci-Hub 桌面客户端：<a href="https://zhuanlan.zhihu.com/p/31809890">SciHub Desktop</a>，<a href="https://github.com/leovan/SciHubEVA">Sci-Hub EVA</a> 。（<a href="https://zhuanlan.zhihu.com/p/37471780">四款桌面客户端软件性能评测</a>）</li> </ul> </li> <li><a href="https://scihub.org/search/">ScienceHuβ</a>，<a href="https://www.nap.edu/">The National Academies Press</a>，<a href="https://oatd.org/">Open Access Theses and Dissertations</a></li> <li><strong>英文书籍搜索推荐引擎</strong>：<a href="https://www.jiumodiary.com/">Jiumo E-Book Search 鸠摩搜书</a>，<a href="http://gen.lib.rus.ec/">Library Genesis</a>，<a href="http://bookfi.net/">BookFi</a>，<a href="http://b-ok.xyz/">Electronic library</a>，<a href="http://booksc.org/">booksc.org</a>，<a href="https://avxhm.is/">AvaxHome</a>，<a href="http://ebookhunter.ch/">ebookhunter</a>，<a href="https://www.bookrix.de/">bookrix</a>，<a href="http://www.gutenberg.org/">Free ebooks - Project Gutenberg</a>，<a href="http://www.freebookspot.es/">FreeBookSpot</a> ，<a href="https://www.hathitrust.org/">hathitrust</a>，<a href="https://www.pdfdrive.com/">PDF Drive</a>，<a href="https://pdf-downloads.net/">PDF search engine</a></li> <li><strong>中文书籍搜索推荐引擎</strong> <ul> <li><a href="https://www.jiumodiary.com/">Jiumo E-Book Search 鸠摩搜书</a></li> <li>全国图书馆参考咨询联盟 ：推荐使用 ISBN 检索，通过脚本<a href="https://greasyfork.org/zh-CN/scripts/388744">一键获取图书</a>进行购买，</li> <li>需要图书馆权限：<a href="http://www.duxiu.com/login.jsp">读秀学术搜索</a>，<a href="http://edu.sslibrary.com/">超星汇雅电子图书数据库</a></li> <li><a href="http://www.sopdf.com/zh-hans/">中文 PDF 搜索引擎</a></li> </ul> </li> <li><a href="https://ideas.repec.org/">IDEAS</a> the largest bibliographic database dedicated to Economics and available freely on the Internet. Based on RePEc, it indexes over 2,400,000 items of research, including over 2,200,000 that can be downloaded in full text.</li> <li>电子书：<a href="http://www.nwcbooks.com/">Free eBook PDF EPUB Download</a>，<a href="http://www.lingocn.com/">电子书免费下载</a>，<a href="https://sobooks.cc/">SoBooks（原 “SoKindle”）</a>，<a href="http://oxingtui.com/other/resource.htm">电子书网站汇总</a></li> </ul> <h1 id="扩展技巧">扩展技巧</h1> <h2 id="从谷歌搜获更多">从谷歌搜获更多</h2> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-19-Search-Skills/Untitled-480.webp 480w,/assets/img/2022-01-19-Search-Skills/Untitled-800.webp 800w,/assets/img/2022-01-19-Search-Skills/Untitled-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-19-Search-Skills/Untitled.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <h2 id="hacking-google-search">Hacking Google search</h2> <p><a href="https://www.exploit-db.com/google-hacking-database">Offensive Security’s Exploit Database Archive</a></p> <p><a href="https://ephrain.net/wp-content/uploads/2016/08/BH_EU_05-Long-1.pdf">Google Hacking for Penetration Testers</a></p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-19-Search-Skills/Untitled1-480.webp 480w,/assets/img/2022-01-19-Search-Skills/Untitled1-800.webp 800w,/assets/img/2022-01-19-Search-Skills/Untitled1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-19-Search-Skills/Untitled1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-19-Search-Skills/Untitled2-480.webp 480w,/assets/img/2022-01-19-Search-Skills/Untitled2-800.webp 800w,/assets/img/2022-01-19-Search-Skills/Untitled2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-19-Search-Skills/Untitled2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-19-Search-Skills/Untitled3-480.webp 480w,/assets/img/2022-01-19-Search-Skills/Untitled3-800.webp 800w,/assets/img/2022-01-19-Search-Skills/Untitled3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-19-Search-Skills/Untitled3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-19-Search-Skills/Untitled4-480.webp 480w,/assets/img/2022-01-19-Search-Skills/Untitled4-800.webp 800w,/assets/img/2022-01-19-Search-Skills/Untitled4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-19-Search-Skills/Untitled4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <hr/> <div class="footnotes" role="doc-endnotes"> <ol> <li id="fn:1" role="doc-endnote"> <p><a href="http://blog.nice123.plus/2019/03/23/18%E4%B8%AA%E9%AB%98%E6%95%88%E4%BD%BF%E7%94%A8Google%E6%90%9C%E7%B4%A2%E7%9A%84%E6%8A%80%E5%B7%A7/">18个高效使用Google搜索的技巧</a> <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> <li id="fn:3" role="doc-endnote"> <p><a href="http://zhuqiannan.com/posts/2018/12/scholar-search-tricks/">学术搜索技巧</a> <a href="#fnref:3" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> <li id="fn:2" role="doc-endnote"> <p><a href="https://jeanleem6.github.io/2018/01/31/search-engine-skills/">搜索引擎常用技巧</a> <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> </ol> </div>]]></content><author><name></name></author><category term="工具"/><category term="搜索引擎"/><category term="搜索技巧"/><category term="效率"/><summary type="html"><![CDATA[]]></summary></entry><entry><title type="html">Word 排版技巧</title><link href="https://lccurious.github.io/blog/2022/Word-Tricks/" rel="alternate" type="text/html" title="Word 排版技巧"/><published>2022-01-03T15:51:46+00:00</published><updated>2022-01-03T15:51:46+00:00</updated><id>https://lccurious.github.io/blog/2022/Word-Tricks</id><content type="html" xml:base="https://lccurious.github.io/blog/2022/Word-Tricks/"><![CDATA[<p>Word作为很多人每天都需要接触的工具，在2011年左右就已经引入了很多自动化的工具辅助我们完成日常的工作。除了大家熟悉的模板、引用、大纲、格式刷、图表、目录等内容，还包括自动图文集等更为便捷的工具。受到一位博主<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup>的启发，决定在他的基础上罗列自己常用的一些操作内容。本文中所使用的软件版本为Office 2019中的Word，同时类似的一些功能的在Mac版的Office 2019中也都是支持的，如果不能直接找到对应的按钮只要打开偏好设置搜索打开即可。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/give_me_an_equation-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/give_me_an_equation-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/give_me_an_equation-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/give_me_an_equation.gif" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="来个公式" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">来个公式</figcaption> </figure> </div> </div> <h2 id="开始设置">开始设置</h2> <p>在进行开始设置前需要先从 <strong>“文件”-“选项”</strong> 把Word的 <strong>“显示所有格式标记”</strong> 打开：</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <h2 id="设置样式">设置样式</h2> <p>从一份空的文档开始，一般的文章编排主要涉及的都是，“标题”，“多级列表”，例如要不要让每一集标题自动编号，要不要继承上一集标题的编号等。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-1-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-1-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <p>在一些文档格式要求中，标题的字体都和正文字体有明显不同，我的建议是让标题的设置和正文的格式相互独立。在修改标题样式时，设置标题的样式基准为”（无样式）”实现标题和正文的格式相互独立。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-2-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-2-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="例如这里就将样式基准设为（无样式），并且设定格式为4号黑体" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">例如这里就将样式基准设为（无样式），并且设定格式为4号黑体</figcaption> </figure> </div> </div> <p>例如这里就将样式基准设为（无样式），并且设定格式为4号黑体</p> <p>如果还有一些额外要求的可以再打开格式选项对段落等内容进行修改。例如设置段落中它的段前为18磅，段后为0磅都可以使标题的分块效果更加鲜明。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-3-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-3-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <p>其他的标题格式可以根据各个不同的场景进行分别设置，按照内容编排需要分别设置号1~4级或者更多级标题样式即可。此外，还可以通过格式设置样式选择的快捷键：</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-4-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-4-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <h2 id="多级列表">多级列表</h2> <p>在标题设置完成之后，如果需要增加标题上类似于“1.1”、“1.2.1”这类的序号等，可以通过多级列表进行设置。从开始菜单下选择多级列表，然后定义新的多级列表。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-5-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-5-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-5-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-5.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <p>然后在打开的设置窗口选择左下角的“更多”按钮，显示全部的设置内容：</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-6-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-6-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-6-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-6.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <p>选择列表1，把文本的缩进位置改为0，把列表1链接到标题1的样式，可以看到预览框中一级标题之后就出现了标题1的字样作为占位符。对于编号的位置，在左下的文本缩进栏进行设置，点击“设置所有级别”还可以一次性设置所有子标题。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-7-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-7-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-7-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-7.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <p>此外编号之后还可以选择用什么符号作为编号的间隔，如果有特殊的要求，例如间隔一个汉字间距的场景中，可以选择不特别标注，并在左上一些的”输入编号的格式“栏中进行设置。</p> <blockquote> <p>“输入编号的格式”这个栏中，灰色的编号表示这是word自动计算得到的，可以在其左右自己添加一些文本进行自定义，这样每次自动生成的标题编号就都会包括此类自定义符号。</p> </blockquote> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-8-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-8-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-8-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-8.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="例如按照这类格式还可以为附录设置，更进一步还可以在字体栏中设置标题的字间距" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">例如按照这类格式还可以为附录设置，更进一步还可以在字体栏中设置标题的字间距</figcaption> </figure> </div> </div> <p>例如按照这类格式还可以为附录设置，更进一步还可以在字体栏中设置标题的字间距</p> <p>按照相同的设置还可以设置二级、三级标题的编号等。</p> <h2 id="正文">正文</h2> <p>所有其他题注、目录、页码、页眉页脚包括前面的标题等，默认都是继承自正文的样式的，所以这里先对正文进行设置。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-9-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-9-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-9-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-9.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <p>我们可以按照目标文档的格式需求去调整正文的字体、段落行间距等，但是首行缩进不要在这里设置，因为正文的样式会影响所有的其他默认以它为基础的样式。所以我们宁可在每段段首手动用tab键进行换行也不要在这里修改修改它的缩进从而影响所有可能没有考虑到的内容。</p> <h2 id="封面设置">封面设置</h2> <p>尽量用无框线的表格实现所有说明文字在特定位置的排版规则。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-10-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-10-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-10-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-10.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <p>设置好格式把整个表格的框线全部设为不可见即可。</p> <h2 id="目录">目录</h2> <p>在需要插入目录的地方，通过自定义目录实现目录的各类格式控制。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-11-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-11-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-11-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-11.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <p>然后在弹出界面对目录的具体格式进行修改，要进一步控制目录的生成格式，需要点击”修改“，在有些场景下目录的子级并不需要缩进等默认的配置也需要额外控制。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-12-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-12-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-12-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-12.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-13-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-13-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-13-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-13.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <p>除了缩进，段前段后的距离也需要根据目标文档的样式要求进行额外设置。生成之后的目录样式即为自定义的样式了。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-14-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-14-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-14-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-14.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <h2 id="页码">页码</h2> <p>选择“插入”-“页码”，一般常用的是居中的页码：</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-15-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-15-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-15-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-15.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <p>不过因为设置了封面，所以页码也不会从封面开始计算。所以到“设计“视图下，对页脚进行一些格式设置。首先到封面页，选择页脚，页眉和页脚工具的设计中选择“首页不同”。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-16-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-16-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-16-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-16.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <p>然后到目录页结束的后一页选择，这一页的页码设置，然后在“设计”视图上，把“链接到前一条页眉”关掉。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-17-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-17-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-17-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-17.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <p>然后右键选中页码数字，点击“设置页码格式”让其实页码从1开始。最后回到目录，右键更新目录的页码。</p> <h2 id="图表">图、表</h2> <p>插入图和表时，需要用“引用”-“题注”的插入方式进行内容的引入。如果对题注的字体、段落格式有额外要求的需要单独进行样式的配置。</p> <p>当我们任意插入一张图片之后，通过插入题注的方式进行图片的说明，如果没有需要的标签就通过新建标签生成一个：</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-18-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-18-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-18-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-18.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <p>如果需要包含章节编号形成“1-1”这类格式的话，点击右边“编号”按钮：</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-19-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-19-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-19-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-19.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <p>用连字符实现章节编号的纳入，如果题注和图片有特别的格式要求的，我们可以设置好全部的样式以后用“自动图文集”这个工具实现。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-20-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-20-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-20-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-20.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <p>选中图和题注的内容以后，通过“插入”-“文档部件”把当前的内容加入到自动图文集中去：</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-21-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-21-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-21-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-21.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <p>在弹出的选项框中给这段内容起一个自己习惯的名字即可：</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-22-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-22-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-22-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-22.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <p>自动图文集就像一种宏，把用户生成这个这个块的操作步骤都记录下来，然后用户在文档的空白处输入一小段名字就可以自动实现这类模块内容的插入：</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-23-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-23-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-23-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-23.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <p>敲下回车键以后，我们的图片就按照指定格式生成了：</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-24-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-24-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-24-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-24.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <p>可以看到，这里的编号也因为前一张图片的存在，自动递增了。然后用户就可以通过word的图片替换对图片进行替换，再进行图注的修改等。</p> <p>表格的插入也可以用同样的形式进行。</p> <h2 id="公式的编码">公式的编码</h2> <p>公式的插入也可以实现和图片、表格题注一样的编码体系，但是还需要无框线表格的辅助。插入一个三列的表格，调整间距，使得中间的表格居中，右边的表格选择靠右居中。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-25-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-25-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-25-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-25.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <p>进行公式插入的时候，既可以选择自己手动输入，也可以借助<a href="https://mathpix.com/">Mathpix Snipping Tool</a>直接插入符合Word格式的公式。尽管Word的公式使用MathML语言进行编码，但是又在标准的格式上有一些调整，因此Mathpix工具也据此进行调整，所以到写这篇文章为止，它还是最好的解决方案。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-26-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-26-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-26-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-26.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <p>然后把复制的内容拷贝到中间的框中，然后插入题注，再把题注剪切到右边的框中：</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-27-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-27-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-27-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-27.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <p>此外，这个编号也是可以设置字体格式的。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-28-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-28-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-28-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-28.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <p>最后一步去掉框线，然后以和图片插入部分同样的方式选中它加入到自动图文集中，之后每次只需要用关键词导入内容再对中间的公式进行替换即可。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-03-Word-Tricks/Untitled-29-480.webp 480w,/assets/img/2022-01-03-Word-Tricks/Untitled-29-800.webp 800w,/assets/img/2022-01-03-Word-Tricks/Untitled-29-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022-01-03-Word-Tricks/Untitled-29.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> </div> </div> <hr/> <div class="footnotes" role="doc-endnotes"> <ol> <li id="fn:1" role="doc-endnote"> <p>https://zhuanlan.zhihu.com/p/22737822 <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> </ol> </div>]]></content><author><name></name></author><category term="Word"/><category term="排版"/><summary type="html"><![CDATA[Word作为很多人每天都需要接触的工具，在2011年左右就已经引入了很多自动化的工具辅助我们完成日常的工作。除了大家熟悉的模板、引用、大纲、格式刷、图表、目录等内容，还包括自动图文集等更为便捷的工具。受到一位博主1的启发，决定在他的基础上罗列自己常用的一些操作内容。本文中所使用的软件版本为Office 2019中的Word，同时类似的一些功能的在Mac版的Office 2019中也都是支持的，如果不能直接找到对应的按钮只要打开偏好设置搜索打开即可。 https://zhuanlan.zhihu.com/p/22737822 &#8617;]]></summary></entry><entry><title type="html">Alias Method</title><link href="https://lccurious.github.io/blog/2021/Alias-Method/" rel="alternate" type="text/html" title="Alias Method"/><published>2021-11-30T10:00:36+00:00</published><updated>2021-11-30T10:00:36+00:00</updated><id>https://lccurious.github.io/blog/2021/Alias-Method</id><content type="html" xml:base="https://lccurious.github.io/blog/2021/Alias-Method/"><![CDATA[<p>Alias Method 是一种采样复杂度为 \(O(1)\) 的指定离散概率随机采样算法。一种按照给定离散概率进行随机采样方法可以简单地描述为：</p> <blockquote> <p>给定 \(K\) 个样本，然后按照概率 \(p_{1},\dots,p_{K}\) 从中采样，那么只要将原始的 \([0,1]\) 分成 \(K\) 个区间，然后每份的长度都对应于概率的大小，然后只要从均匀分布 \(U(0,1)\) 采样，再看这个值落在哪个区间就可以实现任意分布的数据采样了。<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup></p> </blockquote> <p>看起来这个问题已经解决了，接下去就是要实现一个这样的算法：给定任意随机数，返回它应该属于哪一个区间。如果用二叉树 BST 实现数据结构的话，查询的效率在 \(O(\log N)\)，距离本文要介绍的 Alias Method 还有明显的距离。</p> <h1 id="alisa-算法">Alisa 算法</h1> <p>根据 <em>Darts, Dice, and Coins: Sampling from a Discrete Distribution</em><sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup> 的解释，算法整理如下：</p> <p>| | | |:—:|:—:| | 为了解决区间查询的效率问题，Alias Method 构造了一个非常特别的数据结构。假设我们给出四个离散概率分别问 1/2、1/3、1/12、1/12。| &lt;div class="row"&gt; &lt;div class="col-sm mt-3 mt-md-0"&gt;</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2021-11-30-Alias-Method/Untitled-480.webp 480w,/assets/img/2021-11-30-Alias-Method/Untitled-800.webp 800w,/assets/img/2021-11-30-Alias-Method/Untitled-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2021-11-30-Alias-Method/Untitled.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;/div&gt;
</code></pre></div></div> <p>&lt;/div&gt; | | 首先对离散概率的分布做归一化，使用离散概率分布的平均概率做归一化，而不是对最大概率做归一化：| &lt;div class="row"&gt; &lt;div class="col-sm mt-3 mt-md-0"&gt;</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2021-11-30-Alias-Method/Untitled1-480.webp 480w,/assets/img/2021-11-30-Alias-Method/Untitled1-800.webp 800w,/assets/img/2021-11-30-Alias-Method/Untitled1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2021-11-30-Alias-Method/Untitled1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="untitiled1" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">untitiled1</figcaption> </figure> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;/div&gt;
</code></pre></div></div> <p>&lt;/div&gt;| | 然后取四个高度为1的矩形对应到归一化后的概率分布 | &lt;div class="row"&gt; &lt;div class="col-sm mt-3 mt-md-0"&gt;</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2021-11-30-Alias-Method/Untitled2-480.webp 480w,/assets/img/2021-11-30-Alias-Method/Untitled2-800.webp 800w,/assets/img/2021-11-30-Alias-Method/Untitled2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2021-11-30-Alias-Method/Untitled2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;/div&gt;
</code></pre></div></div> <p>&lt;/div&gt; | | 然后把高于概率1的部分分割放入到概率不满1的区块中：| &lt;div class="row"&gt; &lt;div class="col-sm mt-3 mt-md-0"&gt;</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2021-11-30-Alias-Method/Untitled3-480.webp 480w,/assets/img/2021-11-30-Alias-Method/Untitled3-800.webp 800w,/assets/img/2021-11-30-Alias-Method/Untitled3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2021-11-30-Alias-Method/Untitled3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;/div&gt;
</code></pre></div></div> <p>&lt;/div&gt; | | 如果填满一个还没有把多出来的部分配完，那就再针对另一个没有满的区块把它填到满为止，即使让当前区块分到不足1: 在进行概率的重新划分时，需要严格遵守每个区块最多只能填入两个区块的概率值。 | &lt;div class="row"&gt; &lt;div class="col-sm mt-3 mt-md-0"&gt;</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2021-11-30-Alias-Method/Untitled4-480.webp 480w,/assets/img/2021-11-30-Alias-Method/Untitled4-800.webp 800w,/assets/img/2021-11-30-Alias-Method/Untitled4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2021-11-30-Alias-Method/Untitled4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;/div&gt;
</code></pre></div></div> <p>&lt;/div&gt; | | 最后再取满出来的第二块去填满第一块的空缺：| &lt;div class="row"&gt; &lt;div class="col-sm mt-3 mt-md-0"&gt;</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2021-11-30-Alias-Method/Untitled5-480.webp 480w,/assets/img/2021-11-30-Alias-Method/Untitled5-800.webp 800w,/assets/img/2021-11-30-Alias-Method/Untitled5-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2021-11-30-Alias-Method/Untitled5.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;/div&gt;
</code></pre></div></div> <p>&lt;/div&gt; | |&lt;div class="row"&gt; &lt;div class="col-sm mt-3 mt-md-0"&gt;</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2021-11-30-Alias-Method/Untitled6-480.webp 480w,/assets/img/2021-11-30-Alias-Method/Untitled6-800.webp 800w,/assets/img/2021-11-30-Alias-Method/Untitled6-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2021-11-30-Alias-Method/Untitled6.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Untitled" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">Untitled</figcaption> </figure> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;/div&gt;
</code></pre></div></div> <p>&lt;/div&gt; | 最后，算法的实现方式就可以通过两个表格实现，一个用于记录原始就属于该区间的概率记作 <code class="language-plaintext highlighter-rouge">Prob</code> ，另一个存储区块编号指代第二层概率对应的区块编号记作 <code class="language-plaintext highlighter-rouge">Alias</code> 。 |</p> <p>进行采样时，先随机生成一个整数值用于选择哪一列，然后再随机生成一个 0~1 之间的数字，如果大于 <code class="language-plaintext highlighter-rouge">Prob</code> 中的概率值，则选择使用 <code class="language-plaintext highlighter-rouge">Alias</code> 中的区块，否则使用原随机数。</p> <h2 id="算法实现">算法实现</h2> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">alias_method_table</span><span class="p">(</span><span class="n">probs</span><span class="p">):</span>
    <span class="n">K</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">probs</span><span class="p">)</span>
		<span class="c1"># 对应于解释中的 `Prob` 表
</span>    <span class="n">S</span> <span class="o">=</span> <span class="p">(</span><span class="n">probs</span> <span class="o">/</span> <span class="n">np</span><span class="p">.</span><span class="nf">sum</span><span class="p">(</span><span class="n">probs</span><span class="p">))</span> <span class="o">*</span> <span class="n">K</span>
		<span class="c1"># 对应于解释中的 `Alias` 表
</span>    <span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">K</span><span class="p">)</span>
    <span class="n">Tl</span> <span class="o">=</span> <span class="nf">set</span><span class="p">(</span><span class="nf">list</span><span class="p">((</span><span class="n">S</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">).</span><span class="nf">nonzero</span><span class="p">()[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="n">Th</span> <span class="o">=</span> <span class="nf">set</span><span class="p">(</span><span class="nf">list</span><span class="p">((</span><span class="n">S</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">).</span><span class="nf">nonzero</span><span class="p">()[</span><span class="mi">0</span><span class="p">]))</span>
    
		<span class="c1"># 不断协调两个数组直到全部安排完
</span>    <span class="k">while</span> <span class="nf">len</span><span class="p">(</span><span class="n">Tl</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nf">len</span><span class="p">(</span><span class="n">Th</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">j</span> <span class="o">=</span> <span class="n">Tl</span><span class="p">.</span><span class="nf">pop</span><span class="p">()</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">Th</span><span class="p">.</span><span class="nf">pop</span><span class="p">()</span>
        <span class="n">S</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">S</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">S</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
        <span class="n">A</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">k</span>
        <span class="k">if</span> <span class="n">S</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">Tl</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">S</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">Th</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">S</span><span class="p">,</span> <span class="n">A</span>
</code></pre></div></div> <hr/> <div class="footnotes" role="doc-endnotes"> <ol> <li id="fn:1" role="doc-endnote"> <p><a href="http://cgi.cs.mcgill.ca/~enewel3/posts/alias-method/index.html">Sampling from Many Discrete Outcomes: the Alias Method</a> <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> <li id="fn:2" role="doc-endnote"> <p><a href="https://www.keithschwarz.com/darts-dice-coins/">Darts, Dice, and Coins: Sampling from a Discrete Distribution</a> <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> </ol> </div>]]></content><author><name></name></author><category term="程序设计"/><category term="convex optimization"/><category term="pattern recognition"/><summary type="html"><![CDATA[Alias Method 是一种采样复杂度为 \(O(1)\) 的指定离散概率随机采样算法。一种按照给定离散概率进行随机采样方法可以简单地描述为：]]></summary></entry><entry><title type="html">a distill-style blog post</title><link href="https://lccurious.github.io/blog/2021/distill/" rel="alternate" type="text/html" title="a distill-style blog post"/><published>2021-05-22T00:00:00+00:00</published><updated>2021-05-22T00:00:00+00:00</updated><id>https://lccurious.github.io/blog/2021/distill</id><content type="html" xml:base="https://lccurious.github.io/blog/2021/distill/"><![CDATA[<h2 id="equations">Equations</h2> <p>This theme supports rendering beautiful math in inline and display modes using <a href="https://www.mathjax.org/">MathJax 3</a> engine. You just need to surround your math expression with <code class="language-plaintext highlighter-rouge">$$</code>, like <code class="language-plaintext highlighter-rouge">$$ E = mc^2 $$</code>. If you leave it inside a paragraph, it will produce an inline expression, just like \(E = mc^2\).</p> <p>To use display mode, again surround your expression with <code class="language-plaintext highlighter-rouge">$$</code> and place it as a separate paragraph. Here is an example:</p> \[\left( \sum_{k=1}^n a_k b_k \right)^2 \leq \left( \sum_{k=1}^n a_k^2 \right) \left( \sum_{k=1}^n b_k^2 \right)\] <p>Note that MathJax 3 is <a href="https://docs.mathjax.org/en/latest/upgrading/whats-new-3.0.html">a major re-write of MathJax</a> that brought a significant improvement to the loading and rendering speed, which is now <a href="http://www.intmath.com/cg5/katex-mathjax-comparison.php">on par with KaTeX</a>.</p> <hr/> <h2 id="citations">Citations</h2> <p>Citations are then used in the article body with the <code class="language-plaintext highlighter-rouge">&lt;d-cite&gt;</code> tag. The key attribute is a reference to the id provided in the bibliography. The key attribute can take multiple ids, separated by commas.</p> <p>The citation is presented inline like this: <d-cite key="gregor2015draw"></d-cite> (a number that displays more information on hover). If you have an appendix, a bibliography is automatically created and populated in it.</p> <p>Distill chose a numerical inline citation style to improve readability of citation dense articles and because many of the benefits of longer citations are obviated by displaying more information on hover. However, we consider it good style to mention author last names if you discuss something at length and it fits into the flow well — the authors are human and it’s nice for them to have the community associate them with their work.</p> <hr/> <h2 id="footnotes">Footnotes</h2> <p>Just wrap the text you would like to show up in a footnote in a <code class="language-plaintext highlighter-rouge">&lt;d-footnote&gt;</code> tag. The number of the footnote will be automatically generated.<d-footnote>This will become a hoverable footnote.</d-footnote></p> <hr/> <h2 id="code-blocks">Code Blocks</h2> <p>Syntax highlighting is provided within <code class="language-plaintext highlighter-rouge">&lt;d-code&gt;</code> tags. An example of inline code snippets: <code class="language-plaintext highlighter-rouge">&lt;d-code language="html"&gt;let x = 10;&lt;/d-code&gt;</code>. For larger blocks of code, add a <code class="language-plaintext highlighter-rouge">block</code> attribute:</p> <d-code block="" language="javascript"> var x = 25; function(x) { return x * x; } </d-code> <p><strong>Note:</strong> <code class="language-plaintext highlighter-rouge">&lt;d-code&gt;</code> blocks do not look good in the dark mode. You can always use the default code-highlight using the <code class="language-plaintext highlighter-rouge">highlight</code> liquid tag:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">25</span><span class="p">;</span>
<span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
<span class="k">return</span> <span class="nx">x</span> <span class="err">\</span><span class="o">*</span> <span class="nx">x</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure> <hr/> <h2 id="interactive-plots">Interactive Plots</h2> <p>You can add interative plots using plotly + iframes :framed_picture:</p> <div class="l-page"> <iframe src="/assets/plotly/demo.html" frameborder="0" scrolling="no" height="500px" width="100%" style="border: 1px dashed grey;"></iframe> </div> <p>The plot must be generated separately and saved into an HTML file. To generate the plot that you see above, you can use the following code snippet:</p> <figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="n">plotly.express</span> <span class="k">as</span> <span class="n">px</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">read_csv</span><span class="p">(</span>
<span class="sh">'</span><span class="s">https://raw.githubusercontent.com/plotly/datasets/master/earthquakes-23k.csv</span><span class="sh">'</span>
<span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="p">.</span><span class="nf">density_mapbox</span><span class="p">(</span>
<span class="n">df</span><span class="p">,</span>
<span class="n">lat</span><span class="o">=</span><span class="sh">'</span><span class="s">Latitude</span><span class="sh">'</span><span class="p">,</span>
<span class="n">lon</span><span class="o">=</span><span class="sh">'</span><span class="s">Longitude</span><span class="sh">'</span><span class="p">,</span>
<span class="n">z</span><span class="o">=</span><span class="sh">'</span><span class="s">Magnitude</span><span class="sh">'</span><span class="p">,</span>
<span class="n">radius</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<span class="n">center</span><span class="o">=</span><span class="nf">dict</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">lon</span><span class="o">=</span><span class="mi">180</span><span class="p">),</span>
<span class="n">zoom</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="n">mapbox_style</span><span class="o">=</span><span class="sh">"</span><span class="s">stamen-terrain</span><span class="sh">"</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">fig</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>
<span class="n">fig</span><span class="p">.</span><span class="nf">write_html</span><span class="p">(</span><span class="sh">'</span><span class="s">assets/plotly/demo.html</span><span class="sh">'</span><span class="p">)</span></code></pre></figure> <hr/> <h2 id="details-boxes">Details boxes</h2> <p>Details boxes are collapsible boxes which hide additional information from the user. They can be added with the <code class="language-plaintext highlighter-rouge">details</code> liquid tag:</p> <details><summary>Click here to know more</summary> <p>Additional details, where math \(2x - 1\) and <code class="language-plaintext highlighter-rouge">code</code> is rendered correctly.</p> </details> <hr/> <h2 id="layouts">Layouts</h2> <p>The main text column is referred to as the body. It is the assumed layout of any direct descendants of the <code class="language-plaintext highlighter-rouge">d-article</code> element.</p> <div class="fake-img l-body"> <p>.l-body</p> </div> <p>For images you want to display a little larger, try <code class="language-plaintext highlighter-rouge">.l-page</code>:</p> <div class="fake-img l-page"> <p>.l-page</p> </div> <p>All of these have an outset variant if you want to poke out from the body text a little bit. For instance:</p> <div class="fake-img l-body-outset"> <p>.l-body-outset</p> </div> <div class="fake-img l-page-outset"> <p>.l-page-outset</p> </div> <p>Occasionally you’ll want to use the full browser width. For this, use <code class="language-plaintext highlighter-rouge">.l-screen</code>. You can also inset the element a little from the edge of the browser by using the inset variant.</p> <div class="fake-img l-screen"> <p>.l-screen</p> </div> <div class="fake-img l-screen-inset"> <p>.l-screen-inset</p> </div> <p>The final layout is for marginalia, asides, and footnotes. It does not interrupt the normal flow of <code class="language-plaintext highlighter-rouge">.l-body</code> sized text except on mobile screen sizes.</p> <div class="fake-img l-gutter"> <p>.l-gutter</p> </div> <hr/> <h2 id="other-typography">Other Typography?</h2> <p>Emphasis, aka italics, with <em>asterisks</em> (<code class="language-plaintext highlighter-rouge">*asterisks*</code>) or <em>underscores</em> (<code class="language-plaintext highlighter-rouge">_underscores_</code>).</p> <p>Strong emphasis, aka bold, with <strong>asterisks</strong> or <strong>underscores</strong>.</p> <p>Combined emphasis with <strong>asterisks and <em>underscores</em></strong>.</p> <p>Strikethrough uses two tildes. <del>Scratch this.</del></p> <ol> <li>First ordered list item</li> <li>Another item ⋅⋅* Unordered sub-list.</li> <li>Actual numbers don’t matter, just that it’s a number ⋅⋅1. Ordered sub-list</li> <li>And another item.</li> </ol> <p>⋅⋅⋅You can have properly indented paragraphs within list items. Notice the blank line above, and the leading spaces (at least one, but we’ll use three here to also align the raw Markdown).</p> <p>⋅⋅⋅To have a line break without a paragraph, you will need to use two trailing spaces.⋅⋅ ⋅⋅⋅Note that this line is separate, but within the same paragraph.⋅⋅ ⋅⋅⋅(This is contrary to the typical GFM line break behaviour, where trailing spaces are not required.)</p> <ul> <li> <p>Unordered list can use asterisks</p> </li> <li> <p>Or minuses</p> </li> <li> <p>Or pluses</p> </li> </ul> <p><a href="https://www.google.com">I’m an inline-style link</a></p> <p><a href="https://www.google.com" title="Google's Homepage">I’m an inline-style link with title</a></p> <p><a href="https://www.mozilla.org">I’m a reference-style link</a></p> <p><a href="http://slashdot.org">You can use numbers for reference-style link definitions</a></p> <p>Or leave it empty and use the <a href="http://www.reddit.com">link text itself</a>.</p> <p>URLs and URLs in angle brackets will automatically get turned into links. http://www.example.com or <a href="http://www.example.com">http://www.example.com</a> and sometimes example.com (but not on Github, for example).</p> <p>Some text to show that the reference links can follow later.</p> <p>Here’s our logo (hover to see the title text):</p> <p>Inline-style: <img src="https://github.com/adam-p/markdown-here/raw/master/src/common/images/icon48.png" alt="alt text" title="Logo Title Text 1"/></p> <p>Reference-style: <img src="https://github.com/adam-p/markdown-here/raw/master/src/common/images/icon48.png" alt="alt text" title="Logo Title Text 2"/></p> <p>Inline <code class="language-plaintext highlighter-rouge">code</code> has <code class="language-plaintext highlighter-rouge">back-ticks around</code> it.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">JavaScript syntax highlighting</span><span class="dl">"</span><span class="p">;</span>
<span class="nf">alert</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span>
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">s</span> <span class="o">=</span> <span class="sh">"</span><span class="s">Python syntax highlighting</span><span class="sh">"</span>
<span class="k">print</span> <span class="n">s</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>No language indicated, so no syntax highlighting.
But let's throw in a &lt;b&gt;tag&lt;/b&gt;.
</code></pre></div></div> <p>Colons can be used to align columns.</p> <table> <thead> <tr> <th>Tables</th> <th style="text-align: center">Are</th> <th style="text-align: right">Cool</th> </tr> </thead> <tbody> <tr> <td>col 3 is</td> <td style="text-align: center">right-aligned</td> <td style="text-align: right">$1600</td> </tr> <tr> <td>col 2 is</td> <td style="text-align: center">centered</td> <td style="text-align: right">$12</td> </tr> <tr> <td>zebra stripes</td> <td style="text-align: center">are neat</td> <td style="text-align: right">$1</td> </tr> </tbody> </table> <p>There must be at least 3 dashes separating each header cell. The outer pipes (|) are optional, and you don’t need to make the raw Markdown line up prettily. You can also use inline Markdown.</p> <table> <thead> <tr> <th>Markdown</th> <th>Less</th> <th>Pretty</th> </tr> </thead> <tbody> <tr> <td><em>Still</em></td> <td><code class="language-plaintext highlighter-rouge">renders</code></td> <td><strong>nicely</strong></td> </tr> <tr> <td>1</td> <td>2</td> <td>3</td> </tr> </tbody> </table> <blockquote> <p>Blockquotes are very handy in email to emulate reply text. This line is part of the same quote.</p> </blockquote> <p>Quote break.</p> <blockquote> <p>This is a very long line that will still be quoted properly when it wraps. Oh boy let’s keep writing to make sure this is long enough to actually wrap for everyone. Oh, you can <em>put</em> <strong>Markdown</strong> into a blockquote.</p> </blockquote> <p>Here’s a line for us to start with.</p> <p>This line is separated from the one above by two newlines, so it will be a <em>separate paragraph</em>.</p> <p>This line is also a separate paragraph, but… This line is only separated by a single newline, so it’s a separate line in the <em>same paragraph</em>.</p>]]></content><author><name>Albert Einstein</name></author><category term="distill"/><category term="formatting"/><summary type="html"><![CDATA[an example of a distill-style blog post and main elements]]></summary></entry><entry><title type="html">Zotero 使用配置</title><link href="https://lccurious.github.io/blog/2021/Zotero-Config/" rel="alternate" type="text/html" title="Zotero 使用配置"/><published>2021-05-16T19:40:14+00:00</published><updated>2021-05-16T19:40:14+00:00</updated><id>https://lccurious.github.io/blog/2021/Zotero-Config</id><content type="html" xml:base="https://lccurious.github.io/blog/2021/Zotero-Config/"><![CDATA[<p>文献管理软件多如牛毛，EndNote、Papers、Mendeley、Citavi、NoteExpress等要么是生态封闭，在文献同步导入插件支持方面有所欠缺，要么是收费并且同时存在这些问题。但是Zotero这款开源软件的出现让人可以以合理的方式更加方便地管理我们的文献。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2021-05-16-Zotero-Config/image-20210516160905361-480.webp 480w,/assets/img/2021-05-16-Zotero-Config/image-20210516160905361-800.webp 800w,/assets/img/2021-05-16-Zotero-Config/image-20210516160905361-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2021-05-16-Zotero-Config/image-20210516160905361.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="image-20210516160905361" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">image-20210516160905361</figcaption> </figure> </div> </div> <h2 id="zotero-特点">Zotero 特点</h2> <p>Zotero的数据库是基于SLQlite，这里面主要存储了你的文献信息和各种关系信息，文献的源PDF等文件则是存储在单独存储在<code class="language-plaintext highlighter-rouge">storage</code>这类文件夹内的。其中这些关联信息可以直接通过它配置的免费服务器进行同步，这意味着可以在多台机器上同步文献，而源文件则可以通过<code class="language-plaintext highlighter-rouge">OneDrive</code>等云盘进行多平台的同步。</p> <h2 id="添加文献">添加文献</h2> <h3 id="文献识别码">文献识别码</h3> <p>通过直接输入文献的识别码，Zotero会自动搜索文献相关的信息。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2021-05-16-Zotero-Config/image-20210516161415958-480.webp 480w,/assets/img/2021-05-16-Zotero-Config/image-20210516161415958-800.webp 800w,/assets/img/2021-05-16-Zotero-Config/image-20210516161415958-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2021-05-16-Zotero-Config/image-20210516161415958.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="image-20210516161415958" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">image-20210516161415958</figcaption> </figure> </div> </div> <p>或者还可以直接导入Bibtex、EndNote等格式的数据库文本进行文献的批量添加。</p> <h3 id="zotero-connector">Zotero Connector</h3> <p>Zotero 软件本体和浏览器插件 Zotero Connector，其中 Zotero Connector 支持 Chrome、Firefox，Edge等浏览器。</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2021-05-16-Zotero-Config/2021-05-16-480.webp 480w,/assets/img/2021-05-16-Zotero-Config/2021-05-16-800.webp 800w,/assets/img/2021-05-16-Zotero-Config/2021-05-16-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2021-05-16-Zotero-Config/2021-05-16.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="2021-05-16" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> <figcaption class="caption">2021-05-16</figcaption> </figure> </div> </div> <p>当我们浏览数据库时，Zotero Connector 会自动读取当前页面的信息，图标也会随着内容进行变化。比如，打开中国知网之后，点击 Chrome 浏览器右上角的 Zotero Connector 图标，就会自动将该页面的数据保存到 Zotero 中，如果有下载全文的权限，还会将 PDF 附件一同保存下来。然后打开 Zotero，会发现文献信息连同 PDF 一起保存了下来，并且光标自动定位到了刚刚保存的这条文献条目上。</p> <h2 id="文件同步">文件同步</h2> <p>Zotero的文件同步与索引同步是分开的，所有索引的内容都存储在Zotero文件夹下的<code class="language-plaintext highlighter-rouge">.sqlite</code>里，对应的PDF文件存在<code class="language-plaintext highlighter-rouge">storage</code>文件夹下，其中的每一个子文件夹都对应于其中的一个文件。所以只要每台机器同步这两份数据即可以保证所有的信息在机器之间的共享。这里我采用<code class="language-plaintext highlighter-rouge">OneDrive</code>作为主要的同步工具，它可以以近乎无感的方式检查文件的变动并进行同步，而且还有文件随选功能。</p> <p>在正式工作时，通常会一直开着Zotero编辑，这就会不停的修改数据中的信息，所以<code class="language-plaintext highlighter-rouge">.sqlite</code>文件就会不断变动。随这种变动而来的一个问题就是，如果多台机器同时开机，并且<code class="language-plaintext highlighter-rouge">OneDrive</code>都在线的情况下会容易导致不同机器间的同步冲突问题。所以这个<code class="language-plaintext highlighter-rouge">.sqlite</code>文件不能直接放在<code class="language-plaintext highlighter-rouge">OneDrive</code>内部进行同步，只对<code class="language-plaintext highlighter-rouge">sotrage</code>文件夹进行同步。</p> <p>Unix对<code class="language-plaintext highlighter-rouge">storage</code>采用软链接：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ln</span> <span class="nt">-s</span> <span class="s2">"/Users/username/OneDrive - zju.edu.cn/Zotero/storage"</span> storage
</code></pre></div></div> <p>Windows下用管理员权限的<code class="language-plaintext highlighter-rouge">mklink</code>。</p> <h2 id="阅读更多">阅读更多</h2> <ol> <li><a href="https://sspai.com/post/59035">https://sspai.com/post/59035</a></li> </ol>]]></content><author><name></name></author><category term="工具"/><category term="文献管理"/><category term="Zotero"/><summary type="html"><![CDATA[文献管理软件多如牛毛，EndNote、Papers、Mendeley、Citavi、NoteExpress等要么是生态封闭，在文献同步导入插件支持方面有所欠缺，要么是收费并且同时存在这些问题。但是Zotero这款开源软件的出现让人可以以合理的方式更加方便地管理我们的文献。]]></summary></entry><entry><title type="html">通过命令行从 Google Drive下载数据</title><link href="https://lccurious.github.io/blog/2021/Download-from-Google-Drive/" rel="alternate" type="text/html" title="通过命令行从 Google Drive下载数据"/><published>2021-05-15T16:00:32+00:00</published><updated>2021-05-15T16:00:32+00:00</updated><id>https://lccurious.github.io/blog/2021/Download-from-Google-Drive</id><content type="html" xml:base="https://lccurious.github.io/blog/2021/Download-from-Google-Drive/"><![CDATA[<p>本文介绍了通过<code class="language-plaintext highlighter-rouge">wget</code>和<code class="language-plaintext highlighter-rouge">curl</code>从Google Drive上下载文件的脚本。因为大量的数据集都存放在Google Drive上，而计算任务通常都是在计算服务器上，直接从Google Drive这类云盘下载到服务器上显然是最合适的方式。</p> <h2 id="分享链接">分享链接</h2> <p>Google Drive的分享链接格式通常为：</p> <div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">https://drive.google.com/file/d/&lt;fileid&gt;/view
</span></code></pre></div></div> <p>其中这个<code class="language-plaintext highlighter-rouge">&lt;fileid&gt;</code>就是对应文件在服务器上的唯一标识符。</p> <p>例如OfficeHome数据集在Google Drive上的链接即为：</p> <div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">https://drive.google.com/file/d/0B81rNlvomiwed0V1YUxQdC1uOTg/view
</span></code></pre></div></div> <p>其中的<code class="language-plaintext highlighter-rouge">&lt;fileid&gt;</code>为<code class="language-plaintext highlighter-rouge">0B81rNlvomiwed0V1YUxQdC1uOTg</code>，文件名可以自己取。</p> <p>所以提取到的关键变量为：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">filename</span><span class="o">=</span><span class="s1">'OfficeHomeDataset_10072016.zip'</span>
<span class="nv">fileid</span><span class="o">=</span><span class="s1">'0B81rNlvomiwed0V1YUxQdC1uOTg'</span>
</code></pre></div></div> <h2 id="wget-下载指令">wget 下载指令</h2> <p>针对小文件：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget <span class="nt">--no-check-certificate</span> <span class="s2">"https://drive.google.com/uc?export=download&amp;id=</span><span class="nv">$$</span><span class="s2">{fileid}"</span> <span class="nt">-O</span> <span class="nv">$$</span><span class="o">{</span>filename<span class="o">}</span>
</code></pre></div></div> <p>如果文件大的话，需要对cookie进行处理：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget <span class="nt">--load-cookies</span> /tmp/cookies.txt <span class="s2">"https://drive.google.com/uc?export=download&amp;confirm=</span><span class="nv">$$</span><span class="s2">(wget --quiet --save-cookies /tmp/cookies.txt --keep-session-cookies --no-check-certificate 'https://drive.google.com/uc?export=download&amp;id=</span><span class="nv">$$</span><span class="s2">{fileid}' -O- | sed -rn 's/.confirm=([0-9A-Za-z_]+)./</span><span class="se">\1\n</span><span class="s2">/p')&amp;id=</span><span class="nv">$$</span><span class="s2">{fileid}"</span> <span class="nt">-O</span> <span class="nv">$$</span><span class="o">{</span>filename<span class="o">}</span> <span class="o">&amp;&amp;</span> <span class="nb">rm</span> <span class="nt">-rf</span> /tmp/cookies.txt
</code></pre></div></div> <p>整理成更方便的脚本示例为：</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="c"># cd scratch place</span>
<span class="nb">cd </span>data/

<span class="c"># Download zip dataset from Google Drive</span>
<span class="nv">filename</span><span class="o">=</span><span class="s1">'OfficeHomeDataset_10072016.zip'</span>
<span class="nv">fileid</span><span class="o">=</span><span class="s1">'0B81rNlvomiwed0V1YUxQdC1uOTg'</span>
wget <span class="nt">--load-cookies</span> /tmp/cookies.txt <span class="s2">"https://drive.google.com/uc?export=download&amp;confirm=</span><span class="nv">$$</span><span class="s2">(wget --quiet --save-cookies /tmp/cookies.txt --keep-session-cookies --no-check-certificate 'https://drive.google.com/uc?export=download&amp;id=</span><span class="nv">$$</span><span class="s2">{fileid}' -O- | sed -rn 's/.confirm=([0-9A-Za-z_]+)./</span><span class="se">\1\n</span><span class="s2">/p')&amp;id=</span><span class="nv">$$</span><span class="s2">{fileid}"</span> <span class="nt">-O</span> <span class="nv">$$</span><span class="o">{</span>filename<span class="o">}</span> <span class="o">&amp;&amp;</span> <span class="nb">rm</span> <span class="nt">-rf</span> /tmp/cookies.txt

<span class="c"># Unzip</span>
unzip <span class="nt">-q</span> <span class="k">${</span><span class="nv">filename</span><span class="k">}</span>
<span class="nb">rm</span> <span class="k">${</span><span class="nv">filename</span><span class="k">}</span>
<span class="nb">cd</span>
</code></pre></div></div> <h2 id="curl-下载指令">curl 下载指令</h2> <p>小文件 &lt; 40MB：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-L</span> <span class="nt">-o</span> <span class="nv">$$</span><span class="o">{</span>filename<span class="o">}</span> <span class="s2">"https://drive.google.com/uc?export=download&amp;id=</span><span class="nv">$$</span><span class="s2">{fileid}"</span>
</code></pre></div></div> <p>大文件 &gt; 40MB：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-c</span> ./cookie <span class="nt">-s</span> <span class="nt">-L</span> <span class="s2">"https://drive.google.com/uc?export=download&amp;id=</span><span class="k">${</span><span class="nv">fileid</span><span class="k">}</span><span class="s2">"</span> <span class="o">&gt;</span> /dev/null
curl <span class="nt">-Lb</span> ./cookie <span class="s2">"https://drive.google.com/uc?export=download&amp;confirm=</span><span class="sb">`</span><span class="nb">awk</span> <span class="s1">'/download/ {print $$NF}'</span> ./cookie<span class="sb">`</span><span class="s2">&amp;id=</span><span class="nv">$$</span><span class="s2">{fileid}"</span> <span class="nt">-o</span> <span class="k">${</span><span class="nv">filename</span><span class="k">}</span>
<span class="nb">rm</span> ./cookie
</code></pre></div></div> <p>整理成脚本：</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
  
<span class="c"># cd scratch place</span>
<span class="nb">cd </span>scratch/
  
<span class="c"># Download zip dataset from Google Drive</span>
<span class="nv">filename</span><span class="o">=</span><span class="s1">'OfficeHomeDataset_10072016.zip'</span>
<span class="nv">fileid</span><span class="o">=</span><span class="s1">'0B81rNlvomiwed0V1YUxQdC1uOTg'</span>
curl <span class="nt">-c</span> ./cookie <span class="nt">-s</span> <span class="nt">-L</span> <span class="s2">"https://drive.google.com/uc?export=download&amp;id=</span><span class="k">${</span><span class="nv">fileid</span><span class="k">}</span><span class="s2">"</span> <span class="o">&gt;</span> /dev/null
curl <span class="nt">-Lb</span> ./cookie <span class="s2">"https://drive.google.com/uc?export=download&amp;confirm=</span><span class="sb">`</span><span class="nb">awk</span> <span class="s1">'/download/ {print $$NF}'</span> ./cookie<span class="sb">`</span><span class="s2">&amp;id=</span><span class="nv">$$</span><span class="s2">{fileid}"</span> <span class="nt">-o</span> <span class="k">${</span><span class="nv">filename</span><span class="k">}</span>
<span class="nb">rm</span> ./cookie
  
<span class="c"># Unzip</span>
unzip <span class="nt">-q</span> <span class="k">${</span><span class="nv">filename</span><span class="k">}</span>
<span class="nb">rm</span> <span class="k">${</span><span class="nv">filename</span><span class="k">}</span>
  
<span class="c"># cd out</span>
<span class="nb">cd</span>
</code></pre></div></div> <p>但是如果连不上外网，那就需要一个梯子的选项，即<code class="language-plaintext highlighter-rouge">proxychains4</code>这个命令行代理工具，或者需要通过其他机器进行联网的中转可以参考<a href="https://lccurious.github.io/2020/07/27/Local-Server-Proxy/">离线服务器通过PC中转连接公网</a>。</p> <p>对于不能直接联网的机器运行脚本方式为：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>proxychains4 sh download_google_drive.sh
</code></pre></div></div> <h2 id="参考资源">参考资源</h2> <ul> <li><a href="https://github.com/JinhangZhu/yolov3/blob/custom/data/get_coco2014.sh">https://github.com/JinhangZhu/yolov3/blob/custom/data/get_coco2014.sh</a></li> <li><a href="https://www.jinhang.work/tech/download-shared-files-using-wget-or-curl/">https://www.jinhang.work/tech/download-shared-files-using-wget-or-curl/</a></li> </ul>]]></content><author><name></name></author><category term="工程"/><category term="Linux"/><category term="Download"/><summary type="html"><![CDATA[本文介绍了通过wget和curl从Google Drive上下载文件的脚本。因为大量的数据集都存放在Google Drive上，而计算任务通常都是在计算服务器上，直接从Google Drive这类云盘下载到服务器上显然是最合适的方式。]]></summary></entry><entry><title type="html">如何阅读一篇论文</title><link href="https://lccurious.github.io/blog/2021/How-to-Read-a-Paper/" rel="alternate" type="text/html" title="如何阅读一篇论文"/><published>2021-01-18T22:55:36+00:00</published><updated>2021-01-18T22:55:36+00:00</updated><id>https://lccurious.github.io/blog/2021/How-to-Read-a-Paper</id><content type="html" xml:base="https://lccurious.github.io/blog/2021/How-to-Read-a-Paper/"><![CDATA[<p>翻译自：<em>How to Read a Paper</em></p> <p>研究者们花费大量的时间用于阅读论文。然而，却很少有专门的技巧教授，这使得文章阅读事倍功半。这篇文章罗列了一个用于阅读研究型文章的实用且高效的“三遍法”。我也描述了如何用这种方法做文献综述。</p> <h1 id="背景">背景</h1> <p>研究者必须要阅读论文的原因有以下几点：从某个会议或者门类中调研，来跟进当前这个领域的情况，或者为了一个新的领域做文献调研。一个典型的研究者几乎每年都会花费上百个小时用于文献阅读。</p> <p>学习如何去高效地阅读论文是一件十分重要却又鲜有教授的技巧。因此，刚刚开始研究生生涯的学生必须要在不断试错的过程中学会这些。学生们花费了大量的精力在这个阶段，并且常常会陷入沮丧。</p> <p>很多年来我一直使用一种简单的方式来高效地阅读论文。这篇文章描述了“三遍法”和用它进行文献调研的方式。</p> <h1 id="三顾法则">三顾法则</h1> <p>关键的是你应该文章读三遍，而不是从头开始读起，一直读到最后。每一遍都要有一个明确的目的，并且能够基于上一遍：第一遍了解文章大致的想法，第二遍让你抓住文章的内容而不是细节，第三遍帮助你进一步加深文章的了解。</p> <h2 id="第一遍">第一遍</h2> <p>第一遍是为了获得文章的鸟瞰视角而进行大致浏览。你可以决定哪些地方你可能是需要多看几遍的。这一遍你大概可以花掉5到10分钟来完成下面的几个步骤：</p> <ol> <li>认真阅读标题，摘要和引言</li> <li>阅读节标题和子节标题，不要看里面的内容</li> <li>阅读结论</li> <li>扫一眼摘要，举出哪些是你已经读过的文章</li> </ol> <p>在第一遍的结尾，你应该可以回答下面五个C：</p> <ol> <li>类别：这篇文章是什么类型的？是一个检测的文章？一个现有系统的分析？一个研究原型的描述？</li> <li>上下文：这和哪些其他文章有关？用了哪些理论基础来分析这个问题？</li> <li>正确性：这里的假设是能验证的吗？</li> <li>贡献：这个文章的主要贡献是哪些？</li> <li>清晰：这篇文章写的清楚吗？</li> </ol> <p>基于这些信息，你可以决定是不是还要再读下去了。这是因为这篇文章并不会引起你的兴趣或者你还缺乏这个领域足够的知识来理解这篇文章，或者文章的作者做了不合理的假设。第一遍对于不属于你的研究领域，但是有一天证明是相关的论文是足够的。（这是什么意思？）</p> <p>顺便说一句，当你在写文章的时候，你也可以期望大部分的审稿人（和读者）都只会看一遍。小心仔细地选择连贯的节和子节的标题，把摘要写的尽可能简洁和全面。如果一个审稿人不能在第一遍读完理解主旨，这篇文章就很有可能被拒；如果一个读者不能在第一遍读过5分钟之后理解文章的亮点，这篇文章就很有可能永远都不会再被读了。</p> <h2 id="第二遍">第二遍</h2> <p>在第二遍时，读文章就要更小心一点了，不过要把像证明这类的细节内容忽略掉。当你阅读时记下要点或者在空白处留下评论会非常有用。</p> <ol> <li>仔细地看图片，图表和文章中的其他插图。在图上花更多的注意力。这个坐标轴是不是标记的合适？结果是否都有配上误差条，所以这个结论是不是统计显著的？一些像这样常见的错误可以把匆匆忙忙粗制滥造的工作和那些真正卓越的区别开来</li> <li>记得标记那些相关的没有读过的引用作为扩展阅读（这是学习这篇文章背景的更好的方式）</li> </ol> <p>第二遍应该会花掉大概一个小时的时间。在这一遍以后，你就应该已经能够抓住这篇文章的内容了。你应该能够有理有据的向另外一个人来总结这篇文章的主要评价了。这样的详细程度对于你感兴趣的文章已经足够了，但是不在于你的研究专业。</p> <p>有的时候，即使在你读了第二遍以后还是不能理解某篇文章。这可能是这个专业对你而言是新的，里面有不熟悉的术语和缩略词。或者作者用了一种你不理解的证明或者实验技术，因此文章的很大一块就是很难理解的。没有事实根据和大量的前向引用，这篇文章就可能是写的不好的。或者只是因为在深夜，你累了。你可以有下面的几个选择，(a) 把文章放在一边，寄希望于你不需要理解它也能获得事业的成功。(b) 在读了背景资料再回到这篇文章。或者 (c) 继续到读第三遍。</p> <h2 id="第三遍">第三遍</h2> <p>为了能够充分地理解一篇文章，尤其是当你是一个审稿人的时候，需要读第三遍。第三遍的关键就在于<em>虚拟复现</em>文章，也就是，和作者一样做出相同的假设，重新创造这个工作。通过比较这个重新创造和原文章，你可以轻易地不仅发现文章的创新点，还能发现它隐藏的失败和假设。</p> <p>这一遍需要在细节上花很大的注意力。你需要在每一条陈述中识别并质疑每一个假设。更有甚者，你应该要思考你自己会如何展示这样一个想法。这种实际和虚拟的比较让我们对证明和展示技术有了深刻的理解，并且你尽可以把这些加入到对你的工具箱中去。在这一遍中，你应该要为未来的工作记下这些想法。</p> <p>对于初学者而言，这一遍大概要花费4到5个小时，对于老鸟大概要花费1个小时左右。在这一遍的末尾，你应该已经能够从记忆中重构整个文章的结构了，也能够鉴别其中的长处和不足了。特别的，你应该能够准确地找出模棱两可的假设，缺失的对相关工作的引用，和实验或者分析技术中可能存在的问题。</p> <h1 id="做文献综述">做文献综述</h1> <p>文献阅读的技巧在做文献综述的过程中可以得到检验。这会要求你读几十篇文章，也许是在不熟悉的领域。你应该读哪些文章？这里就是你可以用读三遍的方法来获得帮助。</p> <p>首先，通过像Google Scholar、ConnectedPapers或者CiteSeer这些学术搜索引擎和一些好好选择的关键词来找到3到5篇领域内最新的文章。通过第一遍读这些文章来获得这些工作的直观感觉，然后阅读它们的相关工作那一节。你会发现最新工作的一个精简的总结，也许如果你足够幸运的话还能发现一个指向一篇最近的综述文章。如果你能找到这样一篇综述，那么你就搞定了。阅读这篇文章，并且为你的好运庆祝🎉。</p> <p>不然，在第二步，在文献目录中找出那些共同引用的文章和重复出现的作者名字。这些就是这个领域中关键文章和研究者。下载这些关键的文章并切把它们放到一边。然后到关键的研究者主页去看他们最近发表了哪些文章。这将帮助你发现这个领域内的顶级会议，因为顶级的研究者一般都发表在顶级的会议上。</p> <p>第三步就是去那些顶级会议的主页去看最近的公开文章。一次快速扫描通常会找到最近的高质量的相关的工作。这些文章和那些你刚才放在一边的那些，就组成了你调研的第一个版本。在这些文章上再重复上面的步骤两遍。如果他们还有一些共同引用的但是你没有发现的文章，把新找到的加入并阅读它，必要的话可以不断重复这些步骤。</p> <h1 id="经验">经验</h1> <p>在过去的15年里，我已经用这种方式阅读会议文章，写审稿意见，做背景调查和在讨论之前快速回顾文章。这种有纪律的方式防止我在鸟瞰之前淹没在细节中。它让我能够估计审稿一批文章可能花费的总时间。更多的，还可以根据我有的时间和我的需要来调整文章评估的深度。</p> <h1 id="相关工作">相关工作</h1> <p>如果你正在为了审稿而阅读一篇文章，你应该阅读Timothy Roscoe的“Writing reviews for systems conferences“。如果你打算去写一篇技术文章，你应该考虑Henning Schulzrinne的全面的网站和George Whitesides在这个阶段的卓越的概要。</p> <h1 id="一个请求">一个请求</h1> <p>我希望让这个文档活起来，我收到评论以后可以更新它，如果有任何评论或者改进的建议请花一点时间给我发邮件。你也可以在CCRo上评论，CCR的在线版本。</p> <h1 id="致谢">致谢</h1> <p>这个文档的第一个版本是我的学生：Hossein Falaki, Earl Oliver 和 Sumair Ur Rahman起草的。我还受益于克里斯托夫·迪欧(Christophe Diot)敏锐的评论和妮可·克莎夫(Nicole Keshav)目光锐利的编辑。 这项研究得到了加拿大国家科学与工程委员会、加拿大研究主席项目、北电网络、微软、英特尔公司和斯普林特公司的资助。</p>]]></content><author><name></name></author><category term="阅读"/><summary type="html"><![CDATA[翻译自：How to Read a Paper]]></summary></entry></feed>